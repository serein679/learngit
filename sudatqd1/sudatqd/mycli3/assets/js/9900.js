"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[9900],{69900:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var o=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"8px"}},[e("div",[e("el-row",[e("el-col",{attrs:{span:24}},[e("p",{staticClass:"title"},[t._v("审核管理")]),e("el-row",{staticStyle:{"margin-top":"5px"}})],1)],1),e("el-row",{staticStyle:{"margin-top":"5px"}},[e("el-col",{staticClass:"filter",staticStyle:{"text-align":"left"},attrs:{span:6}},[e("span",{staticStyle:{"font-family":"STKaiti","font-size":"18px"}},[t._v("审核状态： "),e("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},model:{value:t.typefilter1,callback:function(e){t.typefilter1=e},expression:"typefilter1"}},t._l(t.typelist1,(function(t){return e("el-option",{key:t.reportAs,staticStyle:{"font-family":"STKaiti","font-size":"16px"},attrs:{label:t.typeName1,value:t.reportAs}})})),1)],1)]),e("el-col",{staticClass:"filter",staticStyle:{"text-align":"right"},attrs:{span:2}},[e("el-button",{staticStyle:{"background-color":"peru",border:"0","font-family":"STKaiti","font-size":"18px"},attrs:{type:"primary"},on:{click:t.filter}},[t._v("筛选")])],1)],1),t.isShow?e("el-table",{ref:"table",staticClass:"table",staticStyle:{width:"100%",margin:"auto","margin-top":"10px","font-family":"STKaiti","font-size":"18px","text-align":"center","background-color":"antiquewhite"},attrs:{data:t.hisList,"empty-text":"暂无资源"},on:{"filter-change":t._filterChange}},[e("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"序号",width:"120px",type:"index",index:t.indexMethods}}),e("el-table-column",{attrs:{label:"评论内容","show-overflow-tooltip":"",prop:"commentContent",width:"550px"},scopedSlots:t._u([t._l(t.hisList,(function(i){return{key:"default",fn:function(i){return[e("div",{staticStyle:{"font-size":"18px",cursor:"pointer"}},[e("el-link",{on:{click:function(e){return t.select(i.row.archiveId)}}},[e("div",{staticStyle:{"font-size":"18px"}},[t._v(" "+t._s(t._f("filterAmount")(i.row.commentContent,25))+" ")])])],1)]}}}))],null,!0)}),e("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"举报原因",prop:"content",width:"340px",sortable:""}}),e("el-table-column",{attrs:{label:"举报类型",prop:"reportReasonType",width:"160px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.typeName2[e.row.reportReasonType])+" ")]}}],null,!1,1186286404)}),e("el-table-column",{attrs:{label:"审核状态",prop:"reportState",width:"140px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.typeName1[e.row.reportState])+" ")]}}],null,!1,1595213772)}),e("el-table-column",{attrs:{label:"举报时间",prop:"reportTime",width:"180px",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(new Date(e.row.reportTime).toLocaleDateString("zh").replaceAll("/","-"))+" ")]}}],null,!1,2210648044)}),e("el-table-column",{attrs:{label:"管理",width:"200px",fixed:"right",prop:"reportState"},scopedSlots:t._u([{key:"default",fn:function(i){return[1==i.row.reportState?e("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(e){t.dialogVisible=!0,t.getComment1(i.row.commentId)}}},[t._v(" 审核")]):t._e(),1!=i.row.reportState?e("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(e){t.dialogVisible=!0,t.getComment1(i.row.commentId)}}},[t._v("重新审核")]):t._e()]}}],null,!1,1050464369)})],1):t._e(),e("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total1>0,expression:"total1 > 0"}],staticStyle:{width:"100%",margin:"auto","font-family":"STKaiti"},attrs:{page:t.currentPage,limit:t.pageSize,"page-sizes":t.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:Number(t.total1)},on:{"update:page":function(e){t.currentPage=e},"update:limit":function(e){t.pageSize=e},pagination:t.PageAllHis}}),e("el-dialog",{staticStyle:{"font-family":"STKaiti","font-size":"24px"},attrs:{title:"提示",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{attrs:{model:{entity:t.entity}}},[e("el-form-item",{attrs:{label:"举报审核：","label-width":t.formLabelWidth}},[e("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[e("el-radio",{attrs:{label:1}},[t._v("审核通过")]),e("el-radio",{attrs:{label:2}},[t._v("审核不通过")])],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editRe(t.radio)}}},[t._v("确 定")])],1)],1),e("el-dialog",{staticStyle:{"font-family":"STKaiti","font-size":"24px"},attrs:{title:"举报详情",visible:t.dialogVisible3,width:"55%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible3=e}}},[t.isShow?e("el-table",{ref:"table",staticClass:"table",staticStyle:{width:"1000px",margin:"auto","margin-top":"10px","font-family":"STKaiti","font-size":"18px","text-align":"center"},attrs:{data:t.comment,"empty-text":"暂无资源"},on:{"filter-change":t._filterChange}},[e("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"举报人",prop:"userName",width:"220px"}}),e("el-table-column",{attrs:{label:"举报原因",prop:"reportReasonType",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.typeName[e.row.reportReasonType])+" ")]}}],null,!1,3306755606)}),e("el-table-column",{attrs:{label:"举报时间",prop:"eventDate",width:"140px",sortable:""},scopedSlots:t._u([t._l(t.comment,(function(e){return{key:"default",fn:function(e){return[t._v(" "+t._s(new Date(e.row.reportTime).toLocaleDateString("zh").replaceAll("/","-"))+" ")]}}}))],null,!0)})],1):t._e()],1)],1)])},a=[],n=(i(44114),i(53019),i(69053)),s=i(60250),r=(i(86121),i(96208)),l=i(77819),p={name:"Managenent",components:{Pagination:n.A},data(){return{activeName1:"1",dialogVisible:!1,radio:"4",activeName:"1",coursefilter:"",typefilter:"",typefilter1:"",users:[],typeName2:{0:"违反法律法规",1:"谣言类不实消息",2:"有害社区环境",3:"侵犯个人权益",4:"其他"},options:[],value:[],institutionList:[],list:[],loading:!1,isShow:!0,dialogVisible7:!1,dialogVisible3:!1,adVisible7:!1,dialogVisible9:!1,adVisible9:!1,dialogVisible8:!1,adVisible8:!1,teachers:[],smid:"",paperList:[],teachers:[],currentPage:1,pageSizes:[2,5,10,20,30,50],pageSize:10,total:"",total1:"",total2:"",total5:"",selectName:[],selectName7:[],query:"",name:"",order:0,oneProjects:[],fileName:"",fileName1:"",file:null,dialogVisible5:!1,adVisible5:!1,total4:"",typeName:{0:"违反法律法规",1:"谣言类不实消息",2:"有害社区环境",3:"侵犯个人权益"},typeName1:{1:"待审核",0:"审核通过",2:"审核不通过"},fileList:[],fileList1:[],headers:{},dialogVisible:!1,adVisible:!1,dialogVisible1:!1,adVisible1:!1,dialogVisible2:!1,adVisible2:!1,formLabelWidth:"120px",typelist:[{reportReasonType:"0",typeName:"违反法律法规"},{reportReasonType:"1",typeName:"谣言类不实消息"},{reportReasonType:"2",typeName:"有害社区环境"},{reportReasonType:"3",typeName:"侵犯个人权益"}],entity:[],hisList:[],comment:[],typelist1:[{reportAs:0,typeName1:"待审核"},{reportAs:1,typeName1:"审核通过"},{reportAs:2,typeName1:"审核不通过"}],pickerOptions:{shortcuts:[{text:"今天",onClick(t){t.$emit("pick",new Date)}},{text:"昨天",onClick(t){const e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick(t){const e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]}}},created(){this.PageAllHis()},computed:{listSet(){return this.paperList.map((t=>({value:`${t.paperId}`,label:`${t.paperName}`})))}},methods:{getComment1(t){console.log(t),this.entity.commentId=t},editRe(t){if(this.entity.radio=t,console.log(t),""==this.reportAs)return this.$message({type:"warning",message:"审核状态为空，请填写！"}),!1;this.$confirm("您确定要提交该审核吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const t=new FormData;t.append("file",this.file),t.append("commentId",this.entity.commentId),t.append("reportAs",this.entity.radio),(0,r.mW)(t).then((t=>{"操作成功"==t.message?(this.$router.push("/management/achvManagement"),this.$message({type:"success",message:"修改成功！"}),this.dialogVisible=!1,this.$forceUpdate(),this.PageAllHis(this.order)):"暂无权限"==t.message?(this.$message({type:"error",message:"暂无编辑权限！"}),this.dialogVisible=!1):this.$message({type:"error",message:t.message})}))}))},filterTag(t,e,i){const o=i["property"];return e[o]===t},handleClose(t){this.$confirm("确认关闭？").then((e=>{t()})).catch((t=>{}))},select(t){""!==t&&(console.log(t),this.$router.push({path:"../introduction/selectAr",query:{info:this.$Base64.encode(t)}}))},getOneC(t){(0,r.Y2)(t).then((t=>{this.comment=t.data,console.log(this.comment)}))},PageAllHis(){var t=this.currentPage,e=this.pageSize,i=!0,o="reportTime";(0,r.yc)({pageSize:e,pageNum:t,isAsc:i,orderColumn:o}).then((i=>{i?(this.total1=i.data.total,this.reload(),console.log(t+"/"+e+"/"+this.total),this.hisList=i.data.list):console.log(l["default"])}))},remoteMethod1(t){""!==t?(this.loading=!0,SelectInstitution(t).then((t=>{this.institutionList1=t.data})),setTimeout((()=>{this.loading=!1,this.options1=this.listSet1.filter((e=>e.label.toLowerCase().indexOf(t.toLowerCase())>-1))}),1e3)):this.options1=[]},_filterChange(){this.totalSize=this.$refs.table.paperList.length,console.log(this.totalSize)},sendWangEditor(t){this.oneProjects.hyperlinks=t},reload(){this.isShow=!1,this.$nextTick((()=>{this.isShow=!0}))},openAdd(){this.adVisible=!0,this.addpaper=[],this.fileName=""},selectList1(){(0,s.L2)().then((t=>{this.selectName=t.data}))},resetQuery(){this.name="",this.currentPage=1,this.pageSize=10,this.typefilter="",this.typefilter1="",this.coursefilter="",this.PageAllHis()},filter(){this.currentPage=1,this.pageSize=10,console.log(this.name),this.PageAllHis()},indexMethods(t){return(this.currentPage-1)*this.pageSize+t+1},selectList(){AllResourceList().then((t=>{this.selectName=t.data}))},beforeFileUpload(t){const e=t.size/1024/1024<10;return e?(this.file=t,this.fileName=t.name,!1):(this.$message.error("上传的文件大小不能超过 10MB!"),!1)},updateClick(t){console.log(t),this.$router.push({path:"editorAchv",query:{info:this.$Base64.encode(t)}})},addPaper(){this.$router.push("/management/addAchv")},deleClick(t){console.log(t),this.$confirm("您确定要删除该大事记吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=new FormData;e.append("eventId",t),console.log(t),deleHis(e).then((t=>{"操作成功"==t.message?(this.$message({type:"success",message:"删除成功！"}),this.$forceUpdate(),this.PageAllReCo3(this.order)):"暂无权限"==t.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:t.message})}))}))},deleClick1(t){console.log(t),this.$confirm("您确定要恢复该大事记吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=new FormData;e.append("eventId",t),console.log(t),deleHis1(e).then((t=>{"操作成功"==t.message?(this.$message({type:"success",message:"操作成功！"}),setTimeout((function(){location.reload()}),100),this.PageAllHis(order=0)):"暂无权限"==t.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:t.message})}))}))},indexMethods4(t){return(this.currentPage4-1)*this.pageSize4+t+1}},filters:{formatData(t){return moment(t).format("YYYY-MM-DD")}}},c=p,u=i(81656),m=(0,u.A)(c,o,a,!1,null,"5f9a87d4",null),d=m.exports},86121:function(t,e,i){i.d(e,{Ap:function(){return c},Kn:function(){return u},OB:function(){return n},Rv:function(){return l},SQ:function(){return s},TH:function(){return p},Tg:function(){return r},Vu:function(){return a}});var o=i(47120);function a(t){return(0,o.A)({url:"/Comment/getOneComment1",method:"post",data:t})}function n(t){return(0,o.A)({url:"/PersonalCenter/getUserCommentList",method:"post",data:t})}function s(t){return(0,o.A)({url:"/PersonalCenter/getUserReplyList",method:"post",data:t})}function r(t){return(0,o.A)({url:"/PersonalCenter/getUserComplainList",method:"post",data:t})}function l(t){return(0,o.A)({url:"/PersonalCenter/getUserFeedbackList",method:"post",data:t})}function p(t){return(0,o.A)({url:"/Operation/makeComment",method:"post",data:t})}function c(t){return(0,o.A)({url:"/Operation/getCommentReplyList",method:"post",data:t})}function u(t){return(0,o.A)({url:"/PersonalCenter/deleteUserComment",method:"post",data:t})}},96208:function(t,e,i){i.d(e,{UR:function(){return r},Y2:function(){return c},_Z:function(){return l},ef:function(){return a},mW:function(){return p},nk:function(){return n},uJ:function(){return s},yc:function(){return u}});var o=i(47120);function a(t){return(0,o.A)({url:"/Operation/makeReport",method:"post",data:t})}function n(t){return(0,o.A)({url:"/reportComment/PageAllReCo3",method:"post",data:t})}function s(t){return(0,o.A)({url:"/reportComment/PageAllReCo4",method:"post",data:t})}function r(t){return(0,o.A)({url:"/reportComment/PageAllReCo33",method:"post",data:t})}function l(t){return(0,o.A)({url:"/reportComment/PageAllReCo44",method:"post",data:t})}function p(t){return(0,o.A)({url:"/reportComment/editRe",method:"post",headers:{"Content-Type":"multipart/form-data"},processData:!1,data:t})}function c(t){return(0,o.A)({url:"/reportComment/getOneC",method:"post",data:t})}function u(t){return(0,o.A)({url:"/Operation/getCommentShenList",method:"post",data:t})}},53019:function(t,e,i){var o=i(85471);o["default"].filter("filterAmount",(function(t,e){return e||(e=20),t&&t.length>e&&(t=t.substring(0,e)+"..."),t}))}}]);