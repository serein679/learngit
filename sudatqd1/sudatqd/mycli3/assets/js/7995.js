"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[7995],{47995:function(t,e,i){i.r(e),i.d(e,{default:function(){return b}});var o=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"8px","background-color":"antiquewhite"}},[e("div",{staticStyle:{margin:"0px",top:"140px","background-color":"antiquewhite"}},[e("div",[e("el-row",[e("el-col",{attrs:{span:3,offset:1}},[e("h3",{staticClass:"location"},[t._v("当前位置：")])]),e("el-col",{staticStyle:{"margin-top":"43px"},attrs:{span:10}},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/introduction"}}},[t._v("纸张基因")]),e("el-breadcrumb-item",{attrs:{to:{path:"/introduction"}}},[t._v(" 机构库 ")]),e("el-breadcrumb-item",[e("a",{attrs:{href:"/"}},[t._v("机构详情")])])],1)],1)],1),e("el-row",{staticStyle:{height:"10px"}},[e("el-col",{key:t.index,staticClass:"main-area",attrs:{span:24}})],1),e("el-row",{staticStyle:{height:"auto"}},[e("el-col",{staticStyle:{position:"relative","font-family":"STKaiti","font-size":"22px","text-align":"left",top:"0%",width:"60%",height:"auto","margin-left":"5%","background-color":"white","margin-top":"5%","margin-bottom":"5%","border-radius":"30px"},attrs:{span:14}},[e("div",[e("table",{staticStyle:{"margin-left":"5%",width:"100%","line-height":"250%"},attrs:{data:t.oneIn.institutionItem}},[e("tr",[e("div",{staticStyle:{width:"90px","margin-top":"5%","margin-left":"0%","font-weight":"bold"}},[t._v(" 简介： ")])]),e("tr",[e("div",{staticStyle:{width:"90%","margin-left":"5","margin-right":"5%","text-indent":"2em","line-height":"200%","text-align":"justify"}},[t._v(" "+t._s(t.oneIn.institutionItem.institutionDescription)+" ")])]),e("tr",[e("font",{staticStyle:{"font-weight":"bold"}},[t._v("机构地址：")]),t._v(" "+t._s(t.oneIn.institutionItem.institutionLocation)+" ")],1),e("tr",[e("font",{staticStyle:{"font-weight":"bold"}},[t._v(" 机构始建日期：")]),t._v(" "+t._s(new Date(t.oneIn.institutionItem.institutionDate).toLocaleDateString("zh").replaceAll("/","-"))+" ")],1),e("tr",[e("div",{staticStyle:{"margin-left":"0px",float:"left","font-weight":"bold","margin-top":"10px",height:"auto"}},[t._v(" 珍藏的档案： ")]),t._l(t.archiveList,(function(i){return i.institutionId==t.oneIn.institutionItem.institutionId?e("div",{staticStyle:{"margin-left":"140px",width:"100%","vertical-align":"top",float:"left","margin-top":"10px"}},[e("font",{staticStyle:{cursor:"pointer","font-family":"STKaiti","font-weight":"200",color:"rgb(205, 134, 63)",display:"inline-block","vertical-align":"top"},on:{click:function(e){return t.select(i.archiveId)}}},[t._v(" "+t._s(i.archiveName))])],1):t._e()}))],2)])])]),e("el-col",{staticStyle:{float:"right","margin-top":"5%","margin-right":"5%"},attrs:{span:6}},[e("div",[e("table",{staticStyle:{"margin-left":"1%",width:"100%"},attrs:{data:t.oneIn}},[e("tr",[e("div",{staticClass:"biao"},[t._v(" "+t._s(t.oneIn.institutionItem.institutionName)+" ")])])])]),e("div",t._l(t.oneIn.pictureList,(function(t){return e("table",{staticStyle:{"margin-left":"15%"}},[e("tr",[e("img",{staticStyle:{"margin-top":"15%"},attrs:{src:t.pictureLocation,width:"340px",height:"250px"}})])])})),0)])],1),e("el-row",{staticStyle:{height:"auto"}},[e("el-col",{attrs:{span:20}},[e("table",{staticStyle:{"margin-left":"15%",width:"100%","line-height":"152%","margin-top":"3%","border-collapse":"collapse"}},[e("tr",{staticClass:"head"},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticStyle:{cursor:"pointer","font-family":"STKaiti"},attrs:{type:"text",placeholder:"请输入评论 . . ."},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),e("form",{attrs:{action:"",onsubmit:"return false"}},[e("button",{staticStyle:{cursor:"pointer","font-family":"STKaiti","margin-right":"70px","background-color":"rgba(236, 161, 136, 0.77)",color:"black","margin-top":"7px"},attrs:{type:"button"},on:{click:t.addcomment}},[t._v("发表评论")])])])])]),t.oneIn.commentList.length<1?e("el-empty",{attrs:{description:"暂无评论"}}):t._e(),e("table",{staticStyle:{"margin-left":"5%",width:"100%","margin-top":"2%","border-collapse":"collapse"},attrs:{data:t.oneIn.commentList}},t._l(t.oneIn.commentList,(function(i,o){return e("tr",{key:o,staticStyle:{"font-family":"STKaiti","font-size":"22px","text-align":"left",color:"rgba(0, 0, 0, 0.671)","border-bottom":"1px dashed rgba(155, 97, 15, 0.503)",margin:"3%","margin-top":"2%","line-height":"110%"}},[e("div",{staticStyle:{"line-height":"44px"}},[e("el-avatar",{attrs:{size:44,src:i.picture}}),e("font",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(i.userName))]),t._v("："+t._s(i.commentContent)+" ")],1),e("br"),e("font",{staticStyle:{"margin-left":"75%","margin-top":"5%","margin-bottom":"1%"}},[t._v("发布时间："+t._s(new Date(i.commentTime).toLocaleString("zh").replaceAll("/","-"))+" ")]),e("br"),t.obj.userId==i.userId?e("div",[e("el-button",{staticStyle:{"margin-left":"80%",float:"left","margin-top":"1%","margin-bottom":"1%"},attrs:{size:"large"},on:{click:function(e){t.getComment(i.commentId),t.loginVisible=!0}}},[e("i",{staticClass:"el-icon-chat-square"}),t._v(" 回复 ")]),e("el-button",{staticStyle:{"margin-left":"5%",float:"left","margin-top":"1%","margin-bottom":"1%"},attrs:{size:"large"},on:{click:function(e){return t.deleComment(i.commentId)}}},[e("i",{staticClass:"el-icon-delete"}),t._v(" 删除 ")])],1):t._e(),t.obj.userId!=i.userId?e("div",[e("el-button",{staticStyle:{"margin-left":"80%",float:"left","margin-top":"1%","margin-bottom":"1%"},attrs:{size:"large"},on:{click:function(e){t.getComment(i.commentId),t.loginVisible=!0}}},[e("i",{staticClass:"el-icon-chat-square"}),t._v(" 回复 ")]),e("el-button",{staticStyle:{"margin-left":"5%",float:"left","margin-top":"1%","margin-bottom":"1%"},attrs:{size:"large"},on:{click:function(e){t.loginVisible1=!0,t.getComment(i.commentId)}}},[e("i",{staticClass:"el-icon-warning-outline"}),t._v(" 举报 ")])],1):t._e(),e("br"),t._l(t.commentsList,(function(o,n){return o.replyyId==i.commentId?e("div",{key:n,staticClass:"listbox"},[e("div",{staticClass:"listbox-top-user",staticStyle:{"font-family":"STKaiti","font-size":"22px",color:"rgba(0, 0, 0, 0.671)",margin:"3%","margin-top":"2%","line-height":"110%"}},[e("p",[e("span",{staticStyle:{"font-family":"STKaiti","font-size":"22px","text-align":"left",color:"rgba(0, 0, 0, 0.671)",margin:"3%","margin-top":"2%","line-height":"110%"}},[e("font",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(o.userName)+" ")]),t._v("回复"),e("font",{staticStyle:{"font-weight":"bold"}},[t._v(" "+t._s(i.userName))]),t._v("："+t._s(o.replyContent))],1)]),e("span",{staticStyle:{"margin-left":"77%","margin-top":"5%","margin-bottom":"2%"}},[t._v("发布时间："+t._s(new Date(o.replyTime).toLocaleString("zh").replaceAll("/","-")))]),e("div",{staticClass:"listbox-bottom"},[t.obj.userId==o.userId?e("div",[e("el-button",{staticStyle:{"margin-left":"82%",float:"left","margin-top":"1%","margin-bottom":"1%"},attrs:{size:"large"},on:{click:function(e){t.getReply(o.replyId),t.loginVisible2=!0}}},[e("i",{staticClass:"el-icon-chat-square"}),t._v(" 回复 ")]),e("el-button",{staticStyle:{"margin-left":"5%",float:"left","margin-top":"1%","margin-bottom":"1%"},attrs:{size:"large"},on:{click:function(e){return t.deleReply(o.replyId)}}},[e("i",{staticClass:"el-icon-delete"}),t._v(" 删除 ")])],1):t._e(),t.obj.userId!=o.userId?e("div",[e("el-button",{staticStyle:{"margin-left":"82%",float:"left","margin-top":"1%","margin-bottom":"1%"},attrs:{size:"large"},on:{click:function(e){t.getReply(o.replyId),t.loginVisible2=!0}}},[e("i",{staticClass:"el-icon-chat-square"}),t._v(" 回复 ")]),e("el-button",{staticStyle:{"margin-left":"5%",float:"left","margin-top":"1%","margin-bottom":"1%"},attrs:{size:"large"},on:{click:function(e){t.loginVisible3=!0,t.getReply(o.replyId)}}},[e("i",{staticClass:"el-icon-warning-outline"}),t._v(" 举报 ")])],1):t._e()]),o.children&&o.children.length?e("div",[e("ChildComment",{staticStyle:{"margin-left":"65px"},attrs:{childComments:o.children,parentName:o.userName}})],1):t._e()])]):t._e()})),e("el-dialog",{key:o,staticStyle:{"font-family":"STKaiti"},attrs:{title:"回复评论",visible:t.loginVisible},on:{"update:visible":function(e){t.loginVisible=e}}},[e("el-form",[e("el-form-item",{attrs:{label:"评论","label-width":t.formLabelWidth}},[e("el-input",{attrs:{type:"textarea",rows:6},model:{value:t.reply,callback:function(e){t.reply=e},expression:"reply"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.loginVisible=!1,t.reply=null}}},[t._v("取 消")]),e("el-button",{staticStyle:{"background-color":"antiquewhite",border:"1",color:"black"},attrs:{type:"primary"},on:{click:function(e){return t.addreply()}}},[t._v("评论")])],1)],1),e("el-dialog",{staticStyle:{"font-family":"STKaiti"},attrs:{title:"举报评论",visible:t.loginVisible1},on:{"update:visible":function(e){t.loginVisible1=e}}},[e("el-form",[e("el-form-item",{attrs:{label:"举报原因","label-width":t.formLabelWidth}},[e("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[e("el-radio",{attrs:{label:0,value:0}},[t._v("违反法律法规")]),e("el-radio",{attrs:{label:1,value:1}},[t._v("谣言类不实消息")]),e("el-radio",{attrs:{label:2,value:2}},[t._v("有害社区环境")]),e("el-radio",{attrs:{label:3,value:3}},[t._v("侵犯个人权益")]),e("el-radio",{attrs:{label:4,value:4}},[t._v("其他")])],1)],1)],1),t._v(" 举报详情："),e("el-input",{attrs:{type:"textarea",rows:6},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.loginVisible1=!1,t.radio=0}}},[t._v("取 消")]),e("el-button",{staticStyle:{"background-color":"antiquewhite",border:"1",color:"black"},attrs:{type:"primary"},on:{click:function(e){return t.addReportt(t.radio)}}},[t._v("举报")])],1)],1),e("el-dialog",{key:o,staticStyle:{"font-family":"STKaiti"},attrs:{title:"回复评论",visible:t.loginVisible2},on:{"update:visible":function(e){t.loginVisible2=e}}},[e("el-form",[e("el-form-item",{attrs:{label:"评论","label-width":t.formLabelWidth}},[e("el-input",{attrs:{type:"textarea",rows:6},model:{value:t.reply1,callback:function(e){t.reply1=e},expression:"reply1"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.loginVisible2=!1,t.reply1=null}}},[t._v("取 消")]),e("el-button",{staticStyle:{"background-color":"antiquewhite",border:"1",color:"black"},attrs:{type:"primary"},on:{click:function(e){return t.addreply1()}}},[t._v("评论")])],1)],1),e("el-dialog",{staticStyle:{"font-family":"STKaiti"},attrs:{title:"举报评论",visible:t.loginVisible3},on:{"update:visible":function(e){t.loginVisible3=e}}},[e("el-form",[e("el-form-item",{attrs:{label:"举报原因","label-width":t.formLabelWidth}},[e("el-radio-group",{model:{value:t.radio1,callback:function(e){t.radio1=e},expression:"radio1"}},[e("el-radio",{attrs:{label:0,value:0}},[t._v("违反法律法规")]),e("el-radio",{attrs:{label:1,value:1}},[t._v("谣言类不实消息")]),e("el-radio",{attrs:{label:2,value:2}},[t._v("有害社区环境")]),e("el-radio",{attrs:{label:3,value:3}},[t._v("侵犯个人权益")]),e("el-radio",{attrs:{label:4,value:4}},[t._v("其他")])],1)],1)],1),t._v(" 举报详情："),e("el-input",{attrs:{type:"textarea",rows:6},model:{value:t.content1,callback:function(e){t.content1=e},expression:"content1"}}),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.loginVisible3=!1,t.radio1=0}}},[t._v("取 消")]),e("el-button",{staticStyle:{"background-color":"antiquewhite",border:"1",color:"black"},attrs:{type:"primary"},on:{click:function(e){return t.addReportt1(t.radio1)}}},[t._v("举报")])],1)],1)],2)})),0)],1)],1),e("el-row",[e("p",{staticClass:"last-style",staticStyle:{"text-align":"right"},on:{click:t.goback}},[e("el-button",[t._v("返回")])],1)])],1)])])},n=[],s=(i(44114),i(76678)),a=i(86121),l=i(30558),r=i(76388),c=i(44309),m=i(15516),g=i(96208),d=i(8671);let u;var h={name:"Resource",components:{ChildComment:c.A,SecondComment:m.A},data(){return{oneIn:[],comment:void 0,loginVisible:!1,loginVisible1:!1,loginVisible2:!1,loginVisible3:!1,ins:[],radio:null,radio1:null,content:"",content1:"",entity:[],reply:"",reply1:"",archiveList:[],obj:{userId:parseInt(sessionStorage.getItem("SET_USERID"))},institutionId:"",paperList:[],institutionList:[],url:"",commentId:"",commentsList:[],previewVisible:!1,pdfSrc:""}},created(){this.gettingData(),this.getArchives(),this.startLoading(),u.close(),this.getCommentReplyList()},mounted(){this.getOneIn(this.institutionId)},watch:{$route:"gettingData"},methods:{gettingData(){var t=JSON.parse(this.$Base64.decode(this.$route.query.info));this.institutionId=t},goback(){this.$router.go(-1)},getArchives(){(0,s.WM)().then((t=>{this.archiveList=t.data}))},getComment(t){console.log(t),this.entity.commentId=t,console.log(this.entity.commentId)},addcomment(){console.log(this.comment),void 0==this.comment&&this.$message({type:"error",message:"请输入评论"});let t=sessionStorage.getItem("SET_TOKEN");if(console.log(t),null===t||""===t)return alert("请先登录！"),void this.$router.push({path:"/login/index"});this.$confirm("您确定要添加该评论吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var t=this.institutionId,e=2,i=this.comment;(0,a.TH)({id:t,type:e,content:i}).then((t=>{"您的评论已成功发布！"==t.message?(this.$message({type:"success",message:"您的评论已成功发布！"}),this.comment="",this.$forceUpdate(),this.getOneIn(this.institutionId)):"您的内容中包含敏感词，请注意，我们不接受含有攻击性、侮辱性或不当内容的句子"==t.message?(this.$message({type:"error",message:"您的内容中包含敏感词，请注意，我们不接受含有攻击性、侮辱性或不当内容的句子"}),this.loginVisible=!1,this.comment=""):(this.$message({type:"error",message:t.message}),this.$forceUpdate())}))}))},addreply(){this.entity.commentId=this.entity.commentId,""==this.reply?this.$message({type:"error",message:"请输入回复"}):this.$confirm("您确定要添加该回复吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var t=this.entity.commentId,e=0,i=this.reply;(0,r.qy)({id:t,type:e,content:i}).then((t=>{"您的回复已成功发布！"==t.message?(this.$message({type:"success",message:"您的回复已成功发布！"}),this.reply,this.loginVisible=!1,this.getCommentReplyList()):"您的内容中包含敏感词，请注意，我们不接受含有攻击性、侮辱性或不当内容的句子"==t.message?(this.$message({type:"error",message:"您的内容中包含敏感词，请注意，我们不接受含有攻击性、侮辱性或不当内容的句子"}),this.loginVisible=!1):this.$message({type:"error",message:t.message})}))}))},addReportt1(t){if(console.log(this.entity.replyId),this.entity.radio=t,this.entity.replyId=this.entity.replyId,console.log(t),null==this.radio1)return this.$message({type:"warning",message:"请选择举报原因"}),!1;this.$confirm("您确定要举报该评论吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var t=this.entity.replyId,e=this.radio1,i=this.content1,o=1;(0,g.ef)({id:t,type:e,content:i,contentType:o}).then((t=>{"您的投诉已提交至管理员处，请耐心等待审核！"==t.message?(this.$message({type:"success",message:"您的投诉已提交至管理员处，请耐心等待审核！"}),this.loginVisible3=!1):this.$message({type:"error",message:t.message})}))}))},getReply(t){console.log(t),this.entity.replyId=t,console.log(this.entity.replyId)},getCommentReplyList(){var t=JSON.parse(this.$Base64.decode(this.$route.query.info));this.institutionId=t;var e=this.institutionId,i=2;(0,a.Ap)({id:e,status:i}).then((t=>{this.commentsList=t.data,console.log(this.commentsList)}))},addReportt(t){if(console.log(this.entity.commentId),this.entity.radio=t,this.entity.commentId=this.entity.commentId,console.log(t),null==this.radio)return this.$message({type:"warning",message:"请选择举报原因"}),!1;this.$confirm("您确定要举报该评论吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var t=this.entity.commentId,e=this.radio,i=this.content,o=0;(0,g.ef)({id:t,type:e,content:i,contentType:o}).then((t=>{"您的投诉已提交至管理员处，请耐心等待审核！"==t.message?(this.$message({type:"success",message:"您的投诉已提交至管理员处，请耐心等待审核！"}),this.loginVisible1=!1):this.$message({type:"error",message:t.message})}))}))},select(t){""!==t&&(console.log(t),this.$router.push({path:"./selectAr",query:{info:this.$Base64.encode(t)}}))},deleComment(t){console.log(t),this.$confirm("您确定要删除该评论吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var e=JSON.parse(this.$Base64.decode(this.$route.query.info));this.institutionId=e,(0,a.Kn)(t).then((t=>{"已成功删除"==t.message?(this.$message({type:"success",message:"已成功删除!"}),this.$forceUpdate(),this.getOneIn(this.institutionId)):"暂无权限"==t.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:t.message})}))}))},select1(t){""!==t&&(console.log(t),this.$router.push({path:"./select",query:{info:this.$Base64.encode(t)}}))},startLoading(){u=d.Loading.service({lock:!0,text:"加载中……",background:"rgba(0, 0, 0, 0.7)"})},getOneIn(t){(0,l.Wp)(t).then((t=>{this.oneIn=t.data,console.log(this.oneIn)}))},addreply1(){if(this.entity.replyId=this.entity.replyId,console.log(this.entity.replyId),""==this.reply1)return!1;this.$confirm("您确定要添加该回复吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var t=this.entity.replyId,e=1,i=this.reply1;(0,r.qy)({id:t,type:e,content:i}).then((t=>{"您的回复已成功发布！"==t.message?(this.$message({type:"success",message:"您的回复已成功发布！"}),this.$forceUpdate(),this.reply1,this.loginVisible2=!1,this.getCommentReplyList()):"您的内容中包含敏感词，请注意，我们不接受含有攻击性、侮辱性或不当内容的句子"==t.message?(this.$message({type:"error",message:"您的内容中包含敏感词，请注意，我们不接受含有攻击性、侮辱性或不当内容的句子"}),this.loginVisible2=!1):this.$message({type:"error",message:t.message})}))}))}}},p=h,y=i(81656),f=(0,y.A)(p,o,n,!1,null,"4330726b",null),b=f.exports}}]);