"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[9650],{9650:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var a=function(){var e=this,t=e._self._c;return t("div",{attrs:{slot:"title"},slot:"title"},[t("div",{staticStyle:{padding:"10px"}},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/management/projectManagement"}}},[e._v("档案详情管理")]),t("el-breadcrumb-item",{attrs:{to:{path:"/management/editorProject"}}},[e._v("编辑档案")])],1)],1),t("span",{staticStyle:{"font-family":"'STKaiti'","font-size":"26px"}},[e._v("编辑档案")]),t("el-tabs",{staticClass:"el-tab-div",staticStyle:{"font-family":"STKaiti","font-size":"26px"}},[t("el-form",{ref:"oneArchive",staticStyle:{"font-size":"32px !important"},attrs:{model:e.oneArchive,rules:e.rules}},[t("el-form-item",{staticStyle:{"font-size":"32px !important"}},[t("div",{staticStyle:{"font-size":"24px !important","text-align":"left"}},[e._v("档案的基本信息:")])]),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档案名称","label-width":e.formLabelWidth,prop:"archiveName"}},[t("el-input",{model:{value:e.oneArchive.archiveItem.archiveName,callback:function(t){e.$set(e.oneArchive.archiveItem,"archiveName",t)},expression:"oneArchive.archiveItem.archiveName"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档案编号","label-width":e.formLabelWidth,prop:"bianhao"}},[t("el-input",{model:{value:e.oneArchive.recordingItem.bianHao,callback:function(t){e.$set(e.oneArchive.recordingItem,"bianHao",t)},expression:"oneArchive.recordingItem.bianHao"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档案责任者","label-width":e.formLabelWidth}},[t("el-input",{attrs:{prop:"author"},model:{value:e.oneArchive.recordingItem.author,callback:function(t){e.$set(e.oneArchive.recordingItem,"author",t)},expression:" oneArchive.recordingItem.author"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"语种","label-width":e.formLabelWidth}},[t("el-input",{model:{value:e.oneArchive.recordingItem.language,callback:function(t){e.$set(e.oneArchive.recordingItem,"language",t)},expression:"oneArchive.recordingItem.language"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"分类号","label-width":e.formLabelWidth}},[t("el-input",{model:{value:e.oneArchive.recordingItem.classification,callback:function(t){e.$set(e.oneArchive.recordingItem,"classification",t)},expression:" oneArchive.recordingItem.classification"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档号","label-width":e.formLabelWidth}},[t("el-input",{model:{value:e.oneArchive.recordingItem.reference,callback:function(t){e.$set(e.oneArchive.recordingItem,"reference",t)},expression:"oneArchive.recordingItem.reference"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"档案图片","label-width":e.formLabelWidth}},[t("el-input",{staticStyle:{width:"388px"},attrs:{readonly:!0,placeholder:"文件名",clearable:""},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),t("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{float:"right"},attrs:{action:"doUpload",limit:1,"file-list":e.fileList,"before-upload":e.beforeFileUpload}},[t("el-button",{attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v("上传文件"),t("i",{staticClass:"el-icon-upload el-icon--right"})]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传1M以内的文件")])],1),t("img",{staticStyle:{float:"center","margin-top":"10px"},attrs:{src:e.oneArchive.pictureLocation,width:"40%"}})],1)],1),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"档案出现时间","label-width":e.formLabelWidth,prop:"oneArchive.recordingItem.time"}},[t("el-input",{model:{value:e.oneArchive.recordingItem.time,callback:function(t){e.$set(e.oneArchive.recordingItem,"time",t)},expression:"oneArchive.recordingItem.time"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档案数量","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.shuLiang"}},[t("el-input",{model:{value:e.oneArchive.archivePaperItem.shuLiang,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"shuLiang",t)},expression:"oneArchive.archivePaperItem.shuLiang"}})],1)],1)],1),t("el-form-item",{attrs:{label:"档案简介","label-width":e.formLabelWidth}},[t("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.oneArchive.archiveItem.archiveContent,callback:function(t){e.$set(e.oneArchive.archiveItem,"archiveContent",t)},expression:"oneArchive.archiveItem.archiveContent"}})],1),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{staticStyle:{"margin-left":"1px",width:"300px"},attrs:{label:"信息采集时间","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.creationTime"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",align:"right","picker-options":e.pickerOptions},model:{value:e.oneArchive.archivePaperItem.creationTime,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"creationTime",t)},expression:"oneArchive.archivePaperItem.creationTime"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"使用纸张","label-width":e.formLabelWidth},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-select",{staticStyle:{width:"100%"},attrs:{props:e.paperId,placeholder:"请选择",filterable:""},nativeOn:{click:function(t){return e.getPaper.apply(null,arguments)}},model:{value:e.oneArchive.archivePaperItem.paperId,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"paperId",t)},expression:"oneArchive.archivePaperItem.paperId"}},e._l(e.papers,(function(e){return t("el-option",{key:e.paperId,attrs:{label:e.paperName,value:e.paperId}})})),1)]}}])})],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"所属机构","label-width":e.formLabelWidth},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-select",{staticStyle:{width:"100%"},attrs:{props:e.institutionId,placeholder:"请选择",filterable:""},nativeOn:{click:function(t){return e.getCourses.apply(null,arguments)}},model:{value:e.oneArchive.archiveItem.institutionId,callback:function(t){e.$set(e.oneArchive.archiveItem,"institutionId",t)},expression:"oneArchive.archiveItem.institutionId"}},e._l(e.institutions,(function(e){return t("el-option",{key:e.institutionId,attrs:{label:e.institutionName,value:e.institutionId}})})),1)]}}])})],1)],1),t("el-form-item",{staticStyle:{"font-size":"32px !important"}},[t("div",{staticStyle:{"font-size":"24px !important","text-align":"left"}},[e._v("档案的纸张信息:")])]),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档案纸张尺寸","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.size "}},[t("el-input",{model:{value:e.oneArchive.archivePaperItem.size,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"size",t)},expression:"oneArchive.archivePaperItem.size"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档案纸张ph值","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.ph "}},[t("el-input",{model:{value:e.oneArchive.archivePaperItem.ph,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"ph",t)},expression:"oneArchive.archivePaperItem.ph"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档案纸张尺寸","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.size "}},[t("el-input",{model:{value:e.oneArchive.archivePaperItem.size,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"size",t)},expression:"oneArchive.archivePaperItem.size"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档案纸张厚度","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.thickness "}},[t("el-input",{model:{value:e.oneArchive.archivePaperItem.thickness,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"thickness",t)},expression:"oneArchive.archivePaperItem.thickness"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档案纸张白度","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.whiteness "}},[t("el-input",{model:{value:e.oneArchive.archivePaperItem.whiteness,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"whiteness",t)},expression:"oneArchive.archivePaperItem.whiteness"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档案纸张色度","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.color "}},[t("el-input",{model:{value:e.oneArchive.archivePaperItem.color,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"color",t)},expression:"oneArchive.archivePaperItem.color"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"纸张横纹数量","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.band "}},[t("el-input",{model:{value:e.oneArchive.archivePaperItem.band,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"band",t)},expression:"oneArchive.archivePaperItem.band"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"纸张纵纹间距","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.zong"}},[t("el-input",{model:{value:e.oneArchive.archivePaperItem.zong,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"zong",t)},expression:"oneArchive.archivePaperItem.zong"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档案用纸层数","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.numbers "}},[t("el-input",{model:{value:e.oneArchive.archivePaperItem.numbers,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"numbers",t)},expression:"oneArchive.archivePaperItem.numbers"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{staticStyle:{width:"100%","font-family":"'STKaiti'"},attrs:{label:"用纸纤维分布","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.distribution ",placeholder:"请选择",filterable:""}},[t("el-select",{staticStyle:{width:"100%","font-family":"'STKaiti'"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.oneArchive.archivePaperItem.distribution,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"distribution",t)},expression:"oneArchive.archivePaperItem.distribution"}},e._l(e.typelist1,(function(e){return t("el-option",{key:e.distribution,staticStyle:{"font-family":"'STKaiti'"},attrs:{label:e.typeName,value:e.distribution}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"纸张帘纹情况","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.lianWen"}},[t("el-input",{model:{value:e.oneArchive.archivePaperItem.lianWen,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"lianWen",t)},expression:"oneArchive.archivePaperItem.lianWen"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档案纸张含水量","label-width":e.formLabelWidth,prop:"oneArchive.archivePaperItem.beatDeg"}},[t("el-input",{model:{value:e.oneArchive.archivePaperItem.beatDeg,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"beatDeg",t)},expression:"oneArchive.archivePaperItem.beatDeg"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"纸张破损程度","label-width":e.formLabelWidth,prop:"fiber"}},[t("el-input",{attrs:{prop:"fiber"},model:{value:e.oneArchive.archivePaperItem.degFiber,callback:function(t){e.$set(e.oneArchive.archivePaperItem,"degFiber",t)},expression:"oneArchive.archivePaperItem.degFiber"}})],1)],1)],1),t("el-form-item",{staticStyle:{"font-size":"32px !important"}},[t("div",{staticStyle:{"font-size":"24px !important","text-align":"left"}},[e._v("档案的纸张纤维信息:")])]),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"档案纸张成分","label-width":e.formLabelWidth},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-select",{staticStyle:{width:"100%"},attrs:{props:{key:"componentId",label:"componentName"},multiple:"",placeholder:"请选择"},nativeOn:{click:function(t){return e.getComponentList.apply(null,arguments)}},model:{value:e.oneArchive.archiveComponentItem.componentName,callback:function(t){e.$set(e.oneArchive.archiveComponentItem,"componentName",t)},expression:"oneArchive.archiveComponentItem.componentName "}},e._l(e.components,(function(e){return t("el-option",{key:e.componentId,attrs:{label:e.componentName,value:e.componentId}})})),1)]}}])})],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{staticStyle:{width:"100%","font-family":"'STKaiti'"},attrs:{label:"纸张成分类型","label-width":e.formLabelWidth,prop:"oneArchive.archiveComponentItem.componentType",placeholder:"请选择",filterable:""}},[t("el-select",{staticStyle:{width:"100%","font-family":"'STKaiti'"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.oneArchive.archiveComponentItem.componentType,callback:function(t){e.$set(e.oneArchive.archiveComponentItem,"componentType",t)},expression:"oneArchive.archiveComponentItem.componentType"}},e._l(e.typelist,(function(e){return t("el-option",{key:e.componentType,staticStyle:{"font-family":"'STKaiti'"},attrs:{label:e.typeName,value:e.componentType}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"纸张成分描述","label-width":e.formLabelWidth,prop:"oneArchive.archiveComponentItem.description"}},[t("el-input",{model:{value:e.oneArchive.archiveComponentItem.description,callback:function(t){e.$set(e.oneArchive.archiveComponentItem,"description",t)},expression:"oneArchive.archiveComponentItem.description"}})],1)],1)],1)],1),t("div",{staticClass:"dialog-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeProject()}}},[e._v("修 改")]),t("el-button",{attrs:{type:"primary"},on:{click:e.back}},[e._v("取 消")])],1)],1)],1)},r=[],o=(i(44114),i(53019),i(76678)),n=i(30558),l=i(60250),c=i(71966),s={components:{},data(){return{activeName1:"1",activeName:"1",users:[],paperId:"",options:[],value:[],typelist:[{componentType:0,typeName:"填料成分"},{componentType:1,typeName:"染色成分"},{componentType:2,typeName:"施胶成分"},{componentType:3,typeName:"涂布成分"}],list:[],loading:!1,isShow:!0,dialogVisible7:!1,adVisible7:!1,dialogVisible9:!1,adVisible9:!1,dialogVisible8:!1,adVisible8:!1,teachers:[],smid:"",institutionId:"",paperList:[],oneArchive:[],teachers:[],currentPage:1,pageSizes:[2,5,10,20,30,50],pageSize:10,total:"",total1:"",total2:"",total5:"",selectName:[],selectName7:[],query:"",order:0,oneProjects:[],editor:"",fileName:"",fileName1:"",file:null,dialogVisible5:!1,adVisible5:!1,total4:"",typeName:{0:"手工纸",1:"机械纸",2:"半手工半机械纸"},fileList:[],fileList1:[],headers:{},dialogVisible:!1,institutions:[],papers:[],components:[],adVisible:!1,dialogVisible1:!1,adVisible1:!1,dialogVisible2:!1,adVisible2:!1,formLabelWidth:"120px",typelist1:[{distribution:0,typeName:"均匀"},{distribution:1,typeName:"不均匀"}],pickerOptions:{shortcuts:[{text:"今天",onClick(e){e.$emit("pick",new Date)}},{text:"昨天",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},created(){this.gettingData(),this.getComponentList(),this.getCourses(),this.getPaper(),this.getOneArchivee(this.archiveId)},watch:{$route:"gettingData"},methods:{getCourses(){(0,n.E7)().then((e=>{this.institutions=e.data,console.log(this.institutions)}))},getPaper(){(0,l.L2)().then((e=>{this.papers=e.data,console.log(this.papers)}))},getComponentList(){(0,c.w2)().then((e=>{e?(this.components=e.data,console.log(this.components)):console.log(errorLog)}))},filterTag(e,t,i){const a=i["property"];return t[a]===e},gettingData(){var e=JSON.parse(this.$Base64.decode(this.$route.query.info));this.archiveId=e},_filterChange(){this.totalSize=this.$refs.table.projectList.length,console.log(this.totalSize)},sendWangEditor(e){this.oneProjects.hyperlinks=e},indexMethods(e){return(this.currentPage-1)*this.pageSize+e+1},beforeFileUpload(e){const t=e.size/1024/1024<10;return t?(this.file=e,this.fileName=e.name,!1):(this.$message.error("上传的文件大小不能超过 10MB!"),!1)},getOneArchivee(e){(0,o.$$)(e).then((e=>{this.oneArchive=e.data,this.fileName=this.oneArchive.pictureLocation,console.log(this.oneArchive)}))},changeProject(){if(console.log(this.oneArchive),""==this.oneArchive.archiveName)return this.$message({type:"warning",message:"纸张名称为空，请填写！"}),!1;this.$refs.oneArchive.validate((e=>{if(!e)return console.log("error submit!!"),!1;this.$confirm("您确定要修改该纸张吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=new FormData;e.append("file",this.file),e.append("paperId",this.oneArchive.paperId),e.append("pictureId",this.oneArchive.pictureId),e.append("pictureLocation",this.oneArchive.pictureLocation),e.append("archiveId",this.oneArchive.archiveId),e.append("archiveName",this.oneArchive.archiveName),e.append("author",this.oneArchive.author),e.append("institutionId",this.oneArchive.institutionId),e.append("archiveContent",this.oneArchive.archiveContent),e.append("size",this.oneArchive.size),e.append("thickness",this.oneArchive.thickness),e.append("whiteness",this.oneArchive.whiteness),e.append("composition",this.oneArchive.composition),e.append("form",this.oneArchive.form),e.append("archiveStateType",this.oneArchive.archiveStateType),e.append("beatDeg",this.oneArchive.beatDeg),e.append("fiber",this.oneArchive.fiber),e.append("degFiber",this.oneArchive.degFiber),e.append("bianhao",this.oneArchive.bianhao),e.append("color",this.oneArchive.color),e.append("lianwen",this.oneArchive.lianwen),e.append("firstTime",new Date(this.oneArchive.firstTime)),e.append("recordTime",new Date(this.oneArchive.recordTime)),(0,o.Lz)(e).then((e=>{"操作成功"==e.message?(this.$router.push("/management/forumManagement"),this.$message({type:"success",message:"修改成功！"}),this.dialogVisible=!1):500==e.code?(this.$message({type:"error",message:"档案名重复！"}),this.adVisible=!1):this.$message({type:"error",message:e.message})}))}))}))},back(){this.$router.push("/management/forumManagement")},indexMethods4(e){return(this.currentPage4-1)*this.pageSize4+e+1}},filters:{formatData(e){return moment(e).format("YYYY-MM-DD")}}},p=s,h=i(81656),m=(0,h.A)(p,a,r,!1,null,"209e6354",null),v=m.exports},71966:function(e,t,i){i.d(t,{Pz:function(){return r},SY:function(){return o},VN:function(){return l},w2:function(){return n}});var a=i(47120);function r(e){return(0,a.A)({url:"/Component/getComponentPageList",method:"post",data:e})}function o(e){return(0,a.A)({url:"/Component/changeComponentStatus",method:"post",data:e})}function n(){return(0,a.A)({url:"/Component/getComponentList",method:"post"})}function l(e){return(0,a.A)({url:"/Component/getComponentDetail",method:"post",data:e})}},53019:function(e,t,i){var a=i(85471);a["default"].filter("filterAmount",(function(e,t){return t||(t=20),e&&e.length>t&&(e=e.substring(0,t)+"..."),e}))}}]);