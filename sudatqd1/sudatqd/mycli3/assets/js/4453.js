"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[4453],{24453:function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var s=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"margin-top":"8px"}},[t("div",[t("el-row",[t("el-col",{attrs:{span:24}},[t("p",{staticClass:"title"},[e._v("权限管理")]),t("el-row",{staticStyle:{"margin-top":"5px"}})],1)],1),t("el-row",{staticStyle:{"margin-top":"5px"}}),e.isShow?t("el-table",{ref:"table",staticClass:"table",staticStyle:{width:"100%",margin:"auto","margin-top":"10px","font-family":"STKaiti","font-size":"18px","text-align":"center","background-color":"antiquewhite"},attrs:{data:e.hisList,"empty-text":"暂无资源"},on:{"filter-change":e._filterChange}},[t("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"序号",width:"150px",type:"index",index:e.indexMethods}}),t("el-table-column",{attrs:{label:"权限名称","show-overflow-tooltip":"",prop:"permissionName",width:"180px"},scopedSlots:e._u([e._l(e.hisList,(function(i){return{key:"default",fn:function(i){return[t("div",{staticStyle:{"font-size":"18px",cursor:"pointer"}},[t("div",{staticStyle:{"font-size":"18px"}},[e._v(e._s(i.row.permissionName))])])]}}}))],null,!0)}),t("el-table-column",{attrs:{label:"角色描述",prop:"description",width:"500px"}}),t("el-table-column",{attrs:{label:"上传人",prop:"creator",width:"220px"}}),t("el-table-column",{attrs:{label:"上传时间",prop:"creationTime",width:"220px",sortable:""},scopedSlots:e._u([e._l(e.hisList,(function(t){return{key:"default",fn:function(t){return[e._v(" "+e._s(new Date(t.row.creationTime).toLocaleDateString("zh").replaceAll("/","-"))+" ")]}}}))],null,!0)}),t("el-table-column",{attrs:{label:"权限状态",prop:"state",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.typeName1[t.row.state])+" ")]}}],null,!1,3673020834)}),t("el-table-column",{attrs:{label:"管理",width:"150px",fixed:"right",prop:"state"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(t){e.loginVisible1=!0,e.getRole(i.row.roleId)}}},[e._v(" 编辑")])]}}],null,!1,1012622693)})],1):e._e(),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total1>0,expression:"total1 > 0"}],staticStyle:{width:"100%",margin:"auto","font-family":"STKaiti"},attrs:{page:e.currentPage,limit:e.pageSize,"page-sizes":e.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:Number(e.total1)},on:{"update:page":function(t){e.currentPage=t},"update:limit":function(t){e.pageSize=t},pagination:e.getRolePageList}}),t("el-dialog",{staticStyle:{"font-family":"STKaiti"},attrs:{title:"编辑角色状态",visible:e.loginVisible1},on:{"update:visible":function(t){e.loginVisible1=t}}},[t("el-form",[t("el-form-item",{attrs:{label:"举报原因","label-width":e.formLabelWidth}},[t("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[t("el-radio",{attrs:{label:0,value:0}},[e._v("删除")]),t("el-radio",{attrs:{label:1,value:1}},[e._v("恢复正常")]),t("el-radio",{attrs:{label:2,value:2}},[e._v("禁用")])],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.loginVisible1=!1,e.radio=0}}},[e._v("取 消")]),t("el-button",{staticStyle:{"background-color":"antiquewhite",border:"1",color:"black"},attrs:{type:"primary"},on:{click:function(t){return e.changeRoleStatus(e.radio)}}},[e._v("提交")])],1)],1)],1)])},a=[],o=(i(44114),i(53019),i(69053)),l=i(47120);function n(e){return(0,l.A)({url:"/Permission/getPermissionPageList",method:"post",data:e})}var r=i(77819),c={name:"Managenent",components:{Pagination:o.A},data(){return{activeName1:"1",loginVisible1:!1,radio:"4",activeName:"1",coursefilter:"",typefilter:"",typefilter1:"",users:[],radio:null,options:[],value:[],institutionList:[],list:[],loading:!1,isShow:!0,dialogVisible7:!1,dialogVisible3:!1,adVisible7:!1,dialogVisible9:!1,adVisible9:!1,dialogVisible8:!1,adVisible8:!1,smid:"",audit:[],currentPage:1,pageSizes:[2,5,10,20,30,50],pageSize:5,total:"",total1:"",total2:"",total5:"",entity:[],selectName7:[],query:"",name:"",order:0,oneProjects:[],fileName:"",fileName1:"",file:null,dialogVisible5:!1,adVisible5:!1,total4:"",typeName:{0:"违反法律法规",1:"谣言类不实消息",2:"有害社区环境",3:"侵犯个人权益"},typeName1:{0:"删除",1:"正常",2:"禁用"},fileList:[],fileList1:[],headers:{},dialogVisible:!1,adVisible:!1,dialogVisible1:!1,adVisible1:!1,dialogVisible2:!1,adVisible2:!1,formLabelWidth:"120px",hisList:[],typelist:[{reportReasonType:"0",typeName:"违反法律法规"},{reportReasonType:"1",typeName:"谣言类不实消息"},{reportReasonType:"2",typeName:"有害社区环境"},{reportReasonType:"3",typeName:"侵犯个人权益"}],entity:[],comment:[],typelist1:[{reportAs:0,typeName1:"待审核"},{reportAs:1,typeName1:"审核通过"},{reportAs:2,typeName1:"审核不通过"}],pickerOptions:{shortcuts:[{text:"今天",onClick(e){e.$emit("pick",new Date)}},{text:"昨天",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},created(){this.getRolePageList(),this.getAuditList()},computed:{listSet(){return this.paperList.map((e=>({value:`${e.paperId}`,label:`${e.paperName}`})))}},methods:{getComment1(e){console.log(e),this.entity.commentId=e},editRe(e){if(this.entity.radio=e,console.log(e),""==this.reportAs)return this.$message({type:"warning",message:"审核状态为空，请填写！"}),!1;this.$confirm("您确定要提交该审核吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=new FormData;e.append("file",this.file),e.append("commentId",this.entity.commentId),e.append("reportAs",this.entity.radio),editRe1(e).then((e=>{"操作成功"==e.message?(this.$router.push("/management/resourceManagement"),this.$message({type:"success",message:"修改成功！"}),this.dialogVisible=!1,this.$forceUpdate(),this.PageAllHis(this.order)):"暂无权限"==e.message?(this.$message({type:"error",message:"暂无编辑权限！"}),this.dialogVisible=!1):this.$message({type:"error",message:e.message})}))}))},filterTag(e,t,i){const s=i["property"];return t[s]===e},handleClose(e){this.$confirm("确认关闭？").then((t=>{e()})).catch((e=>{}))},select(e){""!==e&&(console.log(e),this.$router.push({path:"../introduction/selectAr",query:{info:this.$Base64.encode(e)}}))},getRole(e){console.log(e),this.entity.roleId=e,console.log(this.entity.roleId)},changeRoleStatus(e){if(console.log(this.entity.roleId),this.entity.radio=e,this.entity.roleId=this.entity.roleId,console.log(e),null==this.radio)return this.$message({type:"warning",message:"请选择角色状态"}),!1;this.$confirm("您确定要更改吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var e=this.entity.roleId,t=this.radio;changeRoleStatus({id:e,status:t}).then((e=>{"角色状态已更新"==e.message?(this.$message({type:"success",message:"角色状态已更新！"}),this.loginVisible1=!1,this.getRolePageList()):this.$message({type:"error",message:e.message})}))}))},getRolePageList(){var e=this.currentPage,t=this.pageSize,i=!0,s="permissionId",a="",o="",l="",c="";n({pageSize:t,creator:c,permissioName:o,description:l,pageNum:e,orderColumn:s,isAsc:i,state:a}).then((i=>{i?(this.total1=i.data.total,this.reload(),console.log(e+"/"+t+"/"+this.total),this.hisList=i.data.list):console.log(r["default"])}))},remoteMethod1(e){""!==e?(this.loading=!0,SelectInstitution(e).then((e=>{this.institutionList1=e.data})),setTimeout((()=>{this.loading=!1,this.options1=this.listSet1.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}),1e3)):this.options1=[]},_filterChange(){this.totalSize=this.$refs.table.paperList.length,console.log(this.totalSize)},sendWangEditor(e){this.oneProjects.hyperlinks=e},reload(){this.isShow=!1,this.$nextTick((()=>{this.isShow=!0}))},openAdd(){this.adVisible=!0,this.addpaper=[],this.fileName=""},selectList1(){getPaper().then((e=>{this.selectName=e.data}))},resetQuery(){this.name="",this.currentPage=1,this.pageSize=10,this.typefilter="",this.typefilter1="",this.coursefilter="",this.PageAllHis()},filter(){this.currentPage=1,this.pageSize=10,console.log(this.name),this.PageAllHis()},indexMethods(e){return(this.currentPage-1)*this.pageSize+e+1},getAuditList(){getAuditList().then((e=>{this.audit=e.data}))},beforeFileUpload(e){const t=e.size/1024/1024<10;return t?(this.file=e,this.fileName=e.name,!1):(this.$message.error("上传的文件大小不能超过 10MB!"),!1)},updateClick(e){console.log(e),this.$router.push({path:"editorAchv",query:{info:this.$Base64.encode(e)}})},addPaper(){this.$router.push("/management/addAchv")},deleClick(e){console.log(e),this.$confirm("您确定要删除该大事记吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const t=new FormData;t.append("eventId",e),console.log(e),deleHis(t).then((e=>{"操作成功"==e.message?(this.$message({type:"success",message:"删除成功！"}),this.$forceUpdate(),this.PageAllReCo3(this.order)):"暂无权限"==e.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:e.message})}))}))},deleClick1(e){console.log(e),this.$confirm("您确定要恢复该大事记吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const t=new FormData;t.append("eventId",e),console.log(e),deleHis1(t).then((e=>{"操作成功"==e.message?(this.$message({type:"success",message:"操作成功！"}),setTimeout((function(){location.reload()}),100),this.PageAllHis(order=0)):"暂无权限"==e.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:e.message})}))}))},indexMethods4(e){return(this.currentPage4-1)*this.pageSize4+e+1}},filters:{formatData(e){return moment(e).format("YYYY-MM-DD")}}},p=c,h=i(81656),d=(0,h.A)(p,s,a,!1,null,"cbfe11c8",null),g=d.exports},53019:function(e,t,i){var s=i(85471);s["default"].filter("filterAmount",(function(e,t){return t||(t=20),e&&e.length>t&&(e=e.substring(0,t)+"..."),e}))}}]);