"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[1336],{21336:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{padding:"10px"}},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/management/projectManagement"}}},[e._v("纸张详情管理")]),t("el-breadcrumb-item",{attrs:{to:{path:"/management/addProject"}}},[e._v("新增纸张")])],1)],1),t("div",{attrs:{slot:"title"},slot:"title"}),t("span",{staticStyle:{"font-family":"'STKaiti'","font-size":"26px"}},[e._v("新增纸张")]),t("el-tabs",{staticClass:"el-tab-div",staticStyle:{"font-family":"STKaiti","font-size":"26px"}},[t("el-form",{ref:"addPaper",staticStyle:{"font-size":"32px !important"},attrs:{model:e.addPaper,rules:e.rules}},[t("el-form-item",{attrs:{label:"纸张名称","label-width":e.formLabelWidth,prop:"paperName"}},[t("el-input",{model:{value:e.addPaper.paperName,callback:function(t){e.$set(e.addPaper,"paperName",t)},expression:"addPaper.paperName"}})],1),t("el-form-item",{attrs:{label:"纸张简介","label-width":e.formLabelWidth,prop:"paperDes"}},[t("el-input",{attrs:{type:"textarea",rows:5,prop:"paperDes"},model:{value:e.addPaper.paperDes,callback:function(t){e.$set(e.addPaper,"paperDes",t)},expression:"addPaper.paperDes"}})],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"纸张图片","label-width":e.formLabelWidth}},[t("el-upload",{attrs:{action:"#","list-type":"picture-card","auto-upload":!1,"file-list":e.fileList},scopedSlots:e._u([{key:"file",fn:function({file:a}){return t("div",{},[t("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:a.url,alt:""}}),t("span",{staticClass:"el-upload-list__item-actions"},[t("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(a)}}},[t("i",{staticClass:"el-icon-zoom-in"})]),e.disabled?e._e():t("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleDownload(a)}}},[t("i",{staticClass:"el-icon-download"})]),e.disabled?e._e():t("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(a)}}},[t("i",{staticClass:"el-icon-delete"})])])])}}])},[t("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1),t("el-form-item",{attrs:{label:"制作流程","label-width":e.formLabelWidth,prop:"process"}},[t("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.addPaper.process,callback:function(t){e.$set(e.addPaper,"process",t)},expression:"addPaper.process"}})],1),t("el-form-item",{attrs:{label:"纸张加工工艺","label-width":e.formLabelWidth,prop:"process"}},[t("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.addPaper.technology,callback:function(t){e.$set(e.addPaper,"technology",t)},expression:"addPaper.technology"}})],1),t("el-form-item",{attrs:{label:"纸张类型","label-width":e.formLabelWidth,prop:"paperType"}},[t("el-select",{staticStyle:{width:"100%","font-family":"'STKaiti'"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.addPaper.paperType,callback:function(t){e.$set(e.addPaper,"paperType",t)},expression:"addPaper.paperType"}},e._l(e.typelist1,(function(e){return t("el-option",{key:e.paperType,staticStyle:{"font-family":"'STKaiti'"},attrs:{label:e.typeName,value:e.paperType}})})),1)],1),t("el-form-item",{attrs:{label:"纸张产地","label-width":e.formLabelWidth,prop:"location"}},[t("el-input",{attrs:{type:"textarea",rows:1,prop:"location"},model:{value:e.addPaper.location,callback:function(t){e.$set(e.addPaper,"location",t)},expression:"addPaper.location"}})],1)],1),t("div",{staticClass:"dialog-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addpaper()}}},[e._v("添 加")]),t("el-button",{attrs:{type:"primary"},on:{click:e.back}},[e._v("取 消")])],1)],1)],1)},s=[],l=(a(44114),a(53019),a(56950)),r=a(60250),o=a(78010),p=a(76678),n={components:{},data(){return{rules:{paperName:[{required:!0,message:"请输入纸张名称",trigger:"blur"}],paperDes:[{required:!0,message:"请输入纸张描述",trigger:"blur"}],process:[{required:!0,message:"请输入制作流程",trigger:"blur"}],paperType:[{required:!0,message:"请选择纸张类型",trigger:"blur"}],technology:[{required:!0,message:"请输入纸张加工工艺",trigger:"blur"}]},dialogImageUrl:"",dialogVisible:!1,disabled:!1,activeName:"1",users:[],options1:l.NO,selectedOptions:[],options:[],value:[],list:[],loading:!1,isShow:!0,dialogVisible7:!1,adVisible7:!1,dialogVisible9:!1,adVisible9:!1,dialogVisible8:!1,adVisible8:!1,smid:"",currentPage:1,pageSizes:[2,5,10,20,30,50],pageSize:10,total:"",total1:"",total2:"",total5:"",selectName:[],selectName7:[],query:"",order:0,oneProjects:[],fileName:"",fileName1:"",file:null,dialogVisible5:!1,adVisible5:!1,total4:"",typeName:{0:"手工纸",1:"机械纸",2:"其他"},typelist1:[{paperType:0,typeName:"手工纸"},{paperType:1,typeName:"机械纸"},{paperType:2,typeName:"其他"}],fibers:[],archives:[],fileList:[],fileList1:[],dialogVisible:!1,adVisible:!1,dialogVisible1:!1,adVisible1:!1,dialogVisible2:!1,adVisible2:!1,formLabelWidth:"120px",firstTime:"",addPaper:{paperName:"",paperDes:"",paperType:"",picture:"",location:"",technology:"",process:"",archiveIds:[]},pickerOptions:{shortcuts:[{text:"今天",onClick(e){e.$emit("pick",new Date)}},{text:"昨天",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},created(){this.chooseTimeRange(),this.getFibers(),this.getArchives()},computed:{},methods:{chooseTimeRange(e){this.firstTime=e,console.log(this.firstTime)},getFibers(){(0,o.lf)().then((e=>{this.fibers=e.data,console.log(this.fibers)}))},getArchives(){(0,p.WM)().then((e=>{this.archives=e.data,console.log(this.archives)}))},filterTag(e,t,a){const i=a["property"];return t[i]===e},_filterChange(){this.totalSize=this.$refs.table.projectList.length,console.log(this.totalSize)},sendWangEditor(e){this.oneProjects.hyperlinks=e},reload(){this.isShow=!1,this.$nextTick((()=>{this.isShow=!0,this.$refs.table.bodyWrapper.scrollTop=0}))},remoteMethod(e){""!==e?(this.loading=!0,SelectProject(e).then((e=>{this.projectList=e.data})),setTimeout((()=>{this.loading=!1,this.options=this.listSet.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}),1e3)):this.options=[]},back(){this.$router.push("/management/projectManagement")},selectList1(){Projects().then((e=>{this.selectName=e.data}))},resetQuery(){this.query="",this.currentPage=1,this.pageSize=10,this.typefilter="",this.coursefilter="",this.getProjects()},indexMethods(e){return(this.currentPage-1)*this.pageSize+e+1},beforeFileUpload(e){const t=e.size/1024/1024<1;return t?(this.file=e,this.fileName=e.name,console.log(this.file),!1):(this.$message.error("上传的文件大小不能超过 1MB!"),!1)},handleRemove(e){console.log(e)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleDownload(e){console.log(e)},handleChange(e){console.log(e),console.log(e[0]),console.log(e[1]),console.log(e[2]),this.getCodeToText(null,e)},getCodeToText(e,t){if(console.log(t),null===e&&null===t)return null;null===t&&(t=e.split(","));let a="";switch(t.length){case 1:a+=l.CodeToText[t[0]];break;case 2:a+=l.CodeToText[t[0]]+"/"+l.CodeToText[t[1]];break;case 3:a+=l.CodeToText[t[0]]+"/"+l.CodeToText[t[1]]+"/"+l.CodeToText[t[2]];break;default:break}return console.log(a),this.addPaper.site=a,console.log(this.addPaper.site),a},changeCarPicture(e,t){let a=new FileReader;a.onload=()=>{let e=a.result,t=e.split(",");this.carPicture=t[1]},a.readAsDataURL(e.raw),console.log(this.carPicture);var i=new FormData;i.append("file",this.carPicture),console.log(i.get("file"))},addpaper(){if(console.log(this.addPaper),""==this.addPaper.paperName)return this.$message({type:"warning",message:"纸张名称为空，请填写！"}),!1;this.$refs.addPaper.validate((e=>{if(!e)return console.log("error submit!!"),!1;this.$confirm("您确定要添加该项目吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var e=this.addPaper.paperName,t=this.addPaper.paperDes,a=this.addPaper.paperType,i=this.addPaper.location,s=this.carPicture,l=this.addPaper.process,o=this.addPaper.technology;(0,r.s)({technology:o,process:l,location:i,paperType:a,paperDes:t,paperName:e,picture:s}).then((e=>{"操作成功"==e.message?(this.$message({type:"success",message:"添加成功！"}),this.adVisible=!1,this.$router.push("/management/projectManagement")):500==e.code?(this.$message({type:"error",message:"错误！"}),this.adVisible=!1):this.$message({type:"error",message:"请填完！"})}))}))}))},indexMethods4(e){return(this.currentPage4-1)*this.pageSize4+e+1}},filters:{formatData(e){return moment(e).format("YYYY-MM-DD")}}},d=n,c=a(81656),h=(0,c.A)(d,i,s,!1,null,"9f1cef46",null),u=h.exports},53019:function(e,t,a){var i=a(85471);i["default"].filter("filterAmount",(function(e,t){return t||(t=20),e&&e.length>t&&(e=e.substring(0,t)+"..."),e}))}}]);