"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[7400],{47400:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"8px"}},[e("div",[e("el-row",[e("el-col",{attrs:{span:24}},[e("p",{staticClass:"title"},[t._v("用户管理")]),e("el-row",{staticStyle:{"margin-top":"15px"}},[e("el-col",{staticClass:"filter",staticStyle:{"text-align":"left"},attrs:{span:11}},[e("span",[e("el-input",{staticStyle:{"font-family":"STKaiti","font-size":"20px",width:"250px"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词",loading:t.loading,clearable:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e("span",[e("el-button",{staticStyle:{"background-color":"peru","font-family":"STKaiti","font-size":"18px"},attrs:{type:"primary"},on:{click:t.filter}},[t._v("搜索")]),e("el-button",{staticStyle:{"font-family":"STKaiti","font-size":"18px"},attrs:{plain:""},on:{click:t.resetQuery}},[t._v("全部")])],1)]),e("el-col",{staticStyle:{"text-align":"right"},attrs:{span:13}},[e("el-button",{staticStyle:{"background-color":"peru",border:"0","font-family":"STKaiti","font-size":"18px","margin-left":"22px"},attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.addPaper}},[t._v("新增管理员 ")])],1)],1),e("el-row",{staticStyle:{"margin-top":"5px"}}),e("el-row",{staticStyle:{"margin-top":"5px"}},[e("el-col",{staticClass:"filter",staticStyle:{"margin-left":"20px","text-align":"left"},attrs:{span:6}},[e("span",{staticStyle:{"font-family":"STKaiti","font-size":"18px"}},[t._v("用户类型： "),e("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},model:{value:t.typefilter,callback:function(e){t.typefilter=e},expression:"typefilter"}},t._l(t.typelist2,(function(t){return e("el-option",{key:t.userType,staticStyle:{"font-family":"STKaiti","font-size":"16px"},attrs:{label:t.typeName2,value:t.userType}})})),1)],1)]),e("el-col",{staticClass:"filter",attrs:{span:6}},[e("span",{staticStyle:{"font-family":"STKaiti","font-size":"18px"}},[t._v("用户状态： "),e("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},model:{value:t.typefilter1,callback:function(e){t.typefilter1=e},expression:"typefilter1"}},t._l(t.typelist1,(function(t){return e("el-option",{key:t.state,staticStyle:{"font-family":"STKaiti","font-size":"16px"},attrs:{label:t.typeName1,value:t.state}})})),1)],1)]),e("el-col",{staticClass:"filter",attrs:{span:2}},[e("el-button",{staticStyle:{"background-color":"peru",border:"0","font-family":"STKaiti","font-size":"18px"},attrs:{type:"primary"},on:{click:t.filter}},[t._v("筛选")])],1)],1)],1)],1),t.isShow?e("el-table",{ref:"table",staticClass:"table",staticStyle:{width:"100%",margin:"auto","margin-top":"10px","font-family":"STKaiti","font-size":"18px","text-align":"center","background-color":"antiquewhite"},attrs:{data:t.userList,"empty-text":"暂无资源"},on:{"filter-change":t._filterChange}},[e("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"序号",width:"140px",type:"index",index:t.indexMethods}}),e("el-table-column",{attrs:{label:"用户昵称",prop:"userName",width:"320px"}}),e("el-table-column",{attrs:{label:"用户头像",prop:"picture",width:"330px"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{attrs:{src:t.row.picture,"min-width":"90",height:"90"}})]}}],null,!1,2359188186)}),e("el-table-column",{attrs:{label:"用户状态",prop:"state",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.typeName1[e.row.state])+" ")]}}],null,!1,3673020834)}),e("el-table-column",{attrs:{label:"用户类型",prop:"userType",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.typeName2[e.row.userType])+" ")]}}],null,!1,1844127519)}),e("el-table-column",{attrs:{label:"管理",width:"220px",fixed:"right",prop:"state"},scopedSlots:t._u([{key:"default",fn:function(i){return[1==i.row.state?e("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(e){return t.deleClick(i.row.userId)}}},[t._v("禁用")]):t._e(),2==i.row.state?e("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(e){return t.deleClick1(i.row.userId)}}},[t._v(" 启用")]):t._e()]}}],null,!1,55531756)})],1):t._e(),e("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total1>0,expression:"total1 > 0"}],staticStyle:{width:"100%",margin:"auto","font-family":"楷体","text-align":"center"},attrs:{page:t.currentPage,limit:t.pageSize,"page-sizes":t.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:Number(t.total1)},on:{"update:page":function(e){t.currentPage=e},"update:limit":function(e){t.pageSize=e},pagination:t.PageAllUser}})],1)])},s=[],r=(i(44114),i(53019),i(69053)),l=i(2600),n=i(77819),o={name:"Managenent",components:{Pagination:r.A},data(){return{activeName1:"1",activeName:"1",coursefilter:"",typefilter:"",typefilter1:"",users:[],options:[],value:[],institutionList:[],list:[],loading:!1,isShow:!0,dialogVisible7:!1,adVisible7:!1,dialogVisible9:!1,adVisible9:!1,dialogVisible8:!1,adVisible8:!1,teachers:[],smid:"",paperList:[],teachers:[],currentPage:1,pageSizes:[2,5,10,20,30,50],pageSize:10,total:"",total1:"",total2:"",total5:"",selectName:[],selectName7:[],query:"",name:"",order:0,oneProjects:[],fileName:"",fileName1:"",file:null,dialogVisible5:!1,adVisible5:!1,total4:"",typeName:{0:"手工纸",1:"机械纸",2:"半手工半机械纸"},typeName1:{0:"注销",1:"正常",2:"已禁用"},userList:[],typeName2:{0:"用户",1:"管理员"},fileList:[],fileList1:[],headers:{},dialogVisible:!1,adVisible:!1,dialogVisible1:!1,adVisible1:!1,dialogVisible2:!1,adVisible2:!1,formLabelWidth:"120px",typelist2:[{userType:1,typeName2:"管理员"},{userType:0,typeName2:"用户"}],typelist1:[{state:1,typeName1:"正常"},{state:0,typeName1:"已禁用"}],pickerOptions:{shortcuts:[{text:"今天",onClick(t){t.$emit("pick",new Date)}},{text:"昨天",onClick(t){const e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick(t){const e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]}}},created(){this.PageAllUser()},computed:{listSet(){return this.paperList.map((t=>({value:`${t.paperId}`,label:`${t.paperName}`})))}},methods:{filterTag(t,e,i){const a=i["property"];return e[a]===t},select(t){console.log(t),this.$router.push({path:"../introduction/selectIn",query:{info:this.$Base64.encode(t)}})},PageAllUser(){var t=this.currentPage,e=this.pageSize,i="",a="",s="userId",r=!1;(0,l._t)({pageSize:e,state:i,pageNum:t,isAsc:r,orderColumn:s,username:a}).then((i=>{i?(this.total1=i.data.total,this.reload(),console.log(t+"/"+e+"/"+this.total),this.userList=i.data.list):console.log(n["default"])}))},remoteMethod1(t){""!==t?(this.loading=!0,SelectInstitution(t).then((t=>{this.institutionList1=t.data})),setTimeout((()=>{this.loading=!1,this.options1=this.listSet1.filter((e=>e.label.toLowerCase().indexOf(t.toLowerCase())>-1))}),1e3)):this.options1=[]},_filterChange(){this.totalSize=this.$refs.table.paperList.length,console.log(this.totalSize)},sendWangEditor(t){this.oneProjects.hyperlinks=t},reload(){this.isShow=!1,this.$nextTick((()=>{this.isShow=!0}))},openAdd(){this.adVisible=!0,this.addpaper=[],this.fileName=""},deleClick(t){this.$confirm("您确定要禁用该用户吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var e=t,i=2;(0,l.Y0)({id:e,status:i}).then((t=>{"用户状态已更新"==t.message?(this.$message({type:"success",message:"用户状态已更新"}),this.PageAllUser(),this.$forceUpdate()):"操作失败，请重试"==t.message?this.$message({type:"error",message:"操作失败，请重试！"}):this.$message({type:"error",message:t.message})}))}))},deleClick1(t){console.log(t),this.$confirm("您确定要启用该用户吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var e=t,i=1;(0,l.Y0)({id:e,status:i}).then((t=>{"用户状态已更新"==t.message?(this.$message({type:"success",message:"用户状态已更新"}),this.$forceUpdate(),this.PageAllUser()):"暂无权限"==t.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:t.message})}))}))},resetQuery(){this.name="",this.currentPage=1,this.pageSize=10,this.typefilter="",this.typefilter1="",this.coursefilter="",this.PageAllUser()},filter(){this.currentPage=1,this.pageSize=10,console.log(this.name),this.PageAllUser()},indexMethods(t){return(this.currentPage-1)*this.pageSize+t+1},selectList(){AllResourceList().then((t=>{this.selectName=t.data}))},beforeFileUpload(t){const e=t.size/1024/1024<10;return e?(this.file=t,this.fileName=t.name,!1):(this.$message.error("上传的文件大小不能超过 10MB!"),!1)},updateClick(t){console.log(t),this.$router.push({path:"editorMien",query:{info:this.$Base64.encode(t)}})},addPaper(){this.$router.push("/management/addUser")},indexMethods4(t){return(this.currentPage4-1)*this.pageSize4+t+1}},filters:{formatData(t){return moment(t).format("YYYY-MM-DD")}}},u=o,c=i(81656),p=(0,c.A)(u,a,s,!1,null,"fb48dd04",null),d=p.exports},2600:function(t,e,i){i.d(e,{Gr:function(){return n},TB:function(){return s},U0:function(){return d},Wv:function(){return r},Y0:function(){return u},ZN:function(){return o},Zq:function(){return l},_t:function(){return f},gw:function(){return c},nu:function(){return p}});var a=i(47120);function s(){return(0,a.A)({url:"/User/getUsers",method:"post"})}function r(t){return(0,a.A)({url:"/User/SelectUser",method:"post",data:t})}function l(t){return(0,a.A)({url:"/User/SelectUser1",method:"post",data:t})}function n(t){return(0,a.A)({url:"/User/getUserDetail",method:"post",data:t})}function o(t){return(0,a.A)({url:"/User/getUs",method:"post",data:t})}function u(t){return(0,a.A)({url:"/User/changeUserStatus",method:"post",data:t})}function c(t){return(0,a.A)({url:"/PersonalCenter/editUser",method:"post",headers:{"Content-Type":"multipart/form-data"},processData:!1,data:t})}function p(t){return(0,a.A)({url:"/Login/register",method:"post",processData:!1,data:t})}function d(t){return(0,a.A)({url:"/User/addUser1",method:"post",headers:{"Content-Type":"multipart/form-data"},processData:!1,data:t})}function f(t){return(0,a.A)({url:"/User/getUserPageList",method:"post",data:t})}},53019:function(t,e,i){var a=i(85471);a["default"].filter("filterAmount",(function(t,e){return e||(e=20),t&&t.length>e&&(t=t.substring(0,e)+"..."),t}))}}]);