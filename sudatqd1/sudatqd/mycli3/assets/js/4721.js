"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[4721],{84721:function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"margin-top":"8px"}},[t("div",[t("el-row",[t("el-col",{attrs:{span:24}},[t("p",{staticClass:"title"},[e._v("档案管理")]),t("el-row",{staticStyle:{"margin-top":"15px"}},[t("el-col",{staticClass:"filter",staticStyle:{"text-align":"left"},attrs:{span:11}},[t("span",[t("el-input",{staticStyle:{"font-family":"STKaiti","font-size":"20px",width:"250px"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.remoteMethod,loading:e.loading,clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t("span",[t("el-button",{staticStyle:{"background-color":"peru","font-family":"STKaiti","font-size":"18px"},attrs:{type:"primary"},on:{click:e.filter}},[e._v("搜索")]),t("el-button",{staticStyle:{"font-family":"STKaiti","font-size":"18px"},attrs:{plain:""},on:{click:e.resetQuery}},[e._v("全部")])],1)]),t("el-col",{staticStyle:{"text-align":"right"},attrs:{span:13}},[t("el-button",{staticStyle:{"background-color":"peru",border:"0","font-family":"STKaiti","font-size":"18px","margin-left":"22px"},attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.addPaper}},[e._v("新增档案 ")])],1)],1),t("el-row",{staticStyle:{"margin-top":"5px","text-align":"left"}},[t("el-col",{staticClass:"filter",staticStyle:{"margin-left":"0px","font-family":"STKaiti","font-size":"18px"},attrs:{span:6}},[t("span",{staticStyle:{"font-family":"STKaiti","font-size":"18px"}},[e._v("档案状态： "),t("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},model:{value:e.typefilter2,callback:function(t){e.typefilter2=t},expression:"typefilter2"}},e._l(e.typelist2,(function(e){return t("el-option",{key:e.archiveType,staticStyle:{"font-family":"STKaiti","font-size":"16px"},attrs:{label:e.typeName3,value:e.archiveType}})})),1)],1)]),t("el-col",{staticClass:"filter",attrs:{span:6}},[t("span",{staticStyle:{"font-family":"STKaiti","font-size":"18px"}},[e._v("档案状态： "),t("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},model:{value:e.typefilter1,callback:function(t){e.typefilter1=t},expression:"typefilter1"}},e._l(e.typelist1,(function(e){return t("el-option",{key:e.archiveStateType,staticStyle:{"font-family":"STKaiti","font-size":"16px"},attrs:{label:e.typeName1,value:e.archiveStateType}})})),1)],1)]),t("el-col",{staticClass:"filter",attrs:{span:2}},[t("el-button",{staticStyle:{"background-color":"peru",border:"0","font-family":"STKaiti","font-size":"18px"},attrs:{type:"primary"},on:{click:e.filter}},[e._v("筛选")])],1)],1)],1)],1),e.isShow?t("el-table",{ref:"table",staticClass:"table",staticStyle:{width:"100%",margin:"auto","margin-top":"10px","font-family":"STKaiti","font-size":"18px","text-align":"center","background-color":"antiquewhite"},attrs:{data:e.archiveList,"empty-text":"暂无资源"},on:{"filter-change":e._filterChange}},[t("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"序号",width:"120px",type:"index",index:e.indexMethods}}),t("el-table-column",{attrs:{label:"档案名称",prop:"archiveName",width:"320px"},scopedSlots:e._u([e._l(e.archiveList,(function(i){return{key:"default",fn:function(i){return[t("div",{staticStyle:{"font-size":"18px"}},[t("el-link",{on:{click:function(t){return e.select(i.row.archiveId)}}},[t("div",{staticStyle:{"font-size":"18px"}},[e._v(e._s(i.row.archiveName))])])],1)]}}}))],null,!0)}),t("el-table-column",{attrs:{label:"档案类型",prop:"archiveType",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.typeName3[t.row.archiveType])+" ")]}}],null,!1,1279546445)}),t("el-table-column",{attrs:{label:"档案状态",prop:"archiveStateType",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.typeName1[t.row.archiveStateType])+" ")]}}],null,!1,3525522936)}),t("el-table-column",{attrs:{label:"上传人",prop:"creator",width:"180px"}}),t("el-table-column",{attrs:{label:"上传时间",prop:"creationTime",width:"200px",sortable:""},scopedSlots:e._u([e._l(e.archiveList,(function(t){return{key:"default",fn:function(t){return[e._v(" "+e._s(new Date(t.row.creationTime).toLocaleDateString("zh").replaceAll("/","-"))+" ")]}}}))],null,!0)}),t("el-table-column",{attrs:{label:"是否放在首页",prop:"pictureState",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.userStateChanged(i.row.archiveId)}},model:{value:i.row.pictureState,callback:function(t){e.$set(i.row,"pictureState",t)},expression:"props.row.pictureState"}})]}}],null,!1,850610411)}),t("el-table-column",{attrs:{label:"管理",width:"150px",fixed:"right",prop:"state"},scopedSlots:e._u([{key:"default",fn:function(i){return[0==i.row.archiveStateType||1==i.row.archiveStateType?t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(t){return e.updateClick(i.row.archiveId)}}},[e._v(" 编辑")]):e._e(),0==i.row.archiveStateType||1==i.row.archiveStateType?t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(t){return e.deleClick(i.row.archiveId)}}},[e._v("删除")]):e._e(),4==i.row.archiveStateType?t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(t){return e.deleClick1(i.row.archiveId)}}},[e._v(" 取消删除")]):e._e(),3==i.row.archiveStateType?t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(t){return e.select(i.row.archiveId)}}},[e._v(" 查看")]):e._e(),3==i.row.archiveStateType?t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(t){e.dialogVisible=!0,e.getComment1(i.row.archiveId)}}},[e._v(" 审核")]):e._e(),2==i.row.archiveStateType?t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(t){e.dialogVisible=!0,e.getComment1(i.row.archiveId)}}},[e._v(" 重新审核")]):e._e()]}}],null,!1,127772922)})],1):e._e(),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total2>0,expression:"total2 > 0"}],staticStyle:{width:"100%",margin:"auto","font-family":"STKaiti"},attrs:{page:e.currentPage,limit:e.pageSize,"page-sizes":e.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:Number(e.total2)},on:{"update:page":function(t){e.currentPage=t},"update:limit":function(t){e.pageSize=t},pagination:e.getSoochowForum}}),t("el-dialog",{staticStyle:{"font-family":"STKaiti","font-size":"24px"},attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{attrs:{model:{entity:e.entity}}},[t("el-form-item",{attrs:{label:"举报审核：","label-width":e.formLabelWidth}},[t("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[t("el-radio",{attrs:{label:1}},[e._v("审核通过")]),t("el-radio",{attrs:{label:2}},[e._v("审核不通过")])],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editRe(e.radio)}}},[e._v("确 定")])],1)],1)],1)])},s=[],o=(i(44114),i(69053)),r=i(77819),l=i(76678),n={name:"Managenent",components:{Pagination:o.A},data(){return{activeName1:"1",radio:"4",activeName:"1",currentDate:"",currentDate1:"",datefilter:new Date(1912,0,1,0,0),datefilter1:new Date(1949,9,1,0,0),typelist1:[{archiveStateType:0,typeName1:"管理员上传"},{archiveStateType:1,typeName1:"待审核"},{archiveStateType:2,typeName1:"审核不通过"},{archiveStateType:3,typeName1:"审核通过"},{archiveStateType:4,typeName1:"删除"}],typelist2:[{archiveType:0,typeName3:"护照"},{archiveType:1,typeName3:"地契"},{archiveType:2,typeName3:"票据"},{archiveType:3,typeName3:"其他"}],options:[],value:[],coursefilter:"",typefilter2:"",typefilter1:"",name:"",list:[],loading:!1,isShow:!0,dialogVisible7:!1,adVisible7:!1,dialogVisible9:!1,adVisible9:!1,dialogVisible8:!1,adVisible8:!1,typeName1:{0:"管理员上传",1:"待审核",2:"审核不通过",3:"审核通过",4:"删除"},typeName3:{0:"护照",1:"地契",2:"票据",3:"其他"},smid:"",archiveList:[],currentPage:1,pageSizes:[2,5,10,20,30,50],pageSize:10,oneForum:[],total2:"",selectName:[],selectName7:[],entity:[],query:"",order:0,addforum:{forumName:"",forumTime:"",hyperlinks:"",soochowForumId:""},fileName:"",fileName1:"",file:null,fileList:[],fileList1:[],headers:{},dialogVisible:!1,adVisible:!1,dialogVisible1:!1,adVisible1:!1,dialogVisible2:!1,adVisible2:!1,formLabelWidth:"120px",pickerOptions:{shortcuts:[{text:"今天",onClick(e){e.$emit("pick",new Date)}},{text:"昨天",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},created(){this.getSoochowForum()},computed:{listSet(){return this.archiveList.map((e=>({value:`${e.archiveId}`,label:`${e.archiveName}`})))}},methods:{getComment1(e){console.log(e),this.entity.archiveId=e},userStateChanged(e){(0,l.Y0)(e).then((t=>{console.log(e),"操作成功"==t.message?(this.$message({type:"success",message:"改变成功！"}),this.getSoochowForum()):"暂无权限"==t.message?this.$message({type:"error",message:"暂无用户管理权限！"}):this.$message({type:"error",message:t.message})}))},editRe(e){if(this.entity.radio=e,console.log(e),""==this.reportAs)return this.$message({type:"warning",message:"审核状态为空，请填写！"}),!1;this.$confirm("您确定要提交该审核吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=new FormData;e.append("archiveId",this.entity.archiveId),e.append("archiveStateType",this.entity.radio),(0,l.mW)(e).then((e=>{"操作成功"==e.message?(this.$router.push("/management/forumManagement"),this.$message({type:"success",message:"修改成功！"}),this.dialogVisible=!1,this.$forceUpdate(),this.getSoochowForum(this.order)):"暂无权限"==e.message?(this.$message({type:"error",message:"暂无编辑权限！"}),this.dialogVisible=!1):this.$message({type:"error",message:e.message})}))}))},filterTag(e,t,i){const a=i["property"];return t[a]===e},_filterChange(){this.totalSize=this.$refs.table.archiveList.length,console.log(this.totalSize)},reload(){this.isShow=!1,this.$nextTick((()=>{this.isShow=!0,this.$refs.table.bodyWrapper.scrollTop=0}))},addPaper(){this.$router.push("/management/addTeacher")},remoteMethod(e){""!==e?(this.loading=!0,(0,l.jf)(e).then((e=>{this.archiveList=e.data})),setTimeout((()=>{this.loading=!1,this.options=this.listSet.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}),1e3)):this.options=[]},updateClick(e){console.log(e),this.$router.push({path:"editorTeacher",query:{info:this.$Base64.encode(e)}})},select(e){""!==e&&(console.log(e),this.$router.push({path:"../introduction/selectAr",query:{info:this.$Base64.encode(e)}}))},resetQuery(){this.name="",this.currentPage=1,this.pageSize=10,this.typefilter="",this.typefilter1="",this.datefilter="",this.datefilter=new Date(1912,0,1,0,0),this.datefilter1=new Date(1949,9,1,0,0),this.getSoochowForum()},filter(){this.currentPage=1,this.pageSize=10,this.getSoochowForum()},getSoochowForum(){console.log(this.query);var e=this.currentPage,t=this.pageSize,i=!0,a="",s="",o="",n="archiveId",c="",p="";(0,l.Fq)({pageSize:t,pageNum:e,orderColumn:n,isAsc:i,creator:c,state:p,archiveName:a,institutionName:s,archiveContent:o}).then((e=>{e?(this.archiveList=e.data.list,this.total2=e.data.total,this.$forceUpdate(),console.log(this.archiveList)):console.log(r["default"])}))},indexMethods(e){return(this.currentPage-1)*this.pageSize+e+1},openAdd2(){this.adVisible2=!0,this.addforum=[]},updateClick2(e){this.dialogVisible2=!0,this.oneForum=[],ChooseOneForum(e).then((e=>{this.oneForum=e.data[0],this.fileName=this.oneForum.forumName,console.log(this.oneForum)}))},beforeFileUpload(e){const t=e.size/1024/1024<1;return t?(this.file=e,this.fileName=e.name,!1):(this.$message.error("上传的文件大小不能超过 1MB!"),!1)},deleClick(e){console.log(e),this.$confirm("您确定要删除该档案吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const t=new FormData;t.append("archiveId",e),console.log(e);var i=e,a=4;(0,l.dM)({id:i,status:a}).then((e=>{"档案已删除"==e.message?(this.$message({type:"success",message:"删除成功！"}),this.$forceUpdate(),this.getSoochowForum(this.order)):"暂无权限"==e.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:e.message})}))}))},deleClick1(e){console.log(e),this.$confirm("您确定要取消删除该档案吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const t=new FormData;t.append("archiveId",e),console.log(e);var i=e,a=0;(0,l.KC)({id:i,status:a}).then((e=>{"档案已删除"==e.message?(this.$message({type:"success",message:"操作成功！"}),this.$forceUpdate(),this.getSoochowForum(this.order)):"暂无权限"==e.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:e.message})}))}))},indexMethods4(e){return(this.currentPage4-1)*this.pageSize4+e+1}},filters:{formatData(e){return moment(e).format("YYYY-MM-DD")}}},c=n,p=i(81656),h=(0,p.A)(c,a,s,!1,null,"d4d1f7c6",null),u=h.exports}}]);