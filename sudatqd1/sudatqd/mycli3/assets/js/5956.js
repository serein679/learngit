"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[5956],{25956:function(e,t,r){r.r(t),r.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{padding:"10px"}},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/management/userManagement"}}},[e._v("用户管理")]),t("el-breadcrumb-item",{attrs:{to:{path:"/management/addUser"}}},[e._v("新增管理员")])],1)],1),t("div",{attrs:{slot:"title"},slot:"title"}),t("span",{staticStyle:{"font-family":"'楷体'","font-size":"26px"}},[e._v("新增管理员")]),t("el-tabs",{staticClass:"el-tab-div",staticStyle:{"font-family":"楷体","font-size":"26px"}},[t("el-form",{ref:"ruleForm",staticStyle:{"font-size":"32px !important"},attrs:{model:e.ruleForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"用户账号:","label-width":e.formLabelWidth,prop:"userAccount"}},[t("el-input",{staticStyle:{width:"65%"},attrs:{autocomplete:"off",placeholder:"请输入邮箱"},model:{value:e.ruleForm.userAccount,callback:function(t){e.$set(e.ruleForm,"userAccount",t)},expression:"ruleForm.userAccount"}})],1),t("el-form-item",{attrs:{label:"头　　像:","label-width":e.formLabelWidth}},[t("el-input",{staticStyle:{width:"65%"},attrs:{readonly:!0,placeholder:"文件名",clearable:""},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),t("span",[t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"doUpload",limit:1,"file-list":e.fileList,"auto-upload":!0,"before-upload":e.beforeFileUpload}},[t("el-button",{staticStyle:{"margin-left":"100%","margin-top":"9px",border:"1"},attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v(" 上传文件"),t("i",{staticClass:"el-icon-upload el-icon--right"})]),t("div",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"230px"},attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传1M以内的文件")])],1)],1)],1),t("el-form-item",{attrs:{label:"昵　　称:","label-width":e.formLabelWidth,prop:"userName"}},[t("el-input",{staticStyle:{width:"65%"},attrs:{autocomplete:"off",placeholder:"请输入昵称"},model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),t("el-form-item",{attrs:{label:"密　　码:","label-width":e.formLabelWidth,prop:"userPass"}},[t("el-input",{staticStyle:{width:"65%"},attrs:{autocomplete:"off",placeholder:"请输入密码","show-password":""},model:{value:e.ruleForm.userPass,callback:function(t){e.$set(e.ruleForm,"userPass",t)},expression:"ruleForm.userPass"}})],1),t("el-form-item",{attrs:{label:"密保问题:","label-width":e.formLabelWidth,prop:"quesId"}},[t("el-select",{staticStyle:{width:"65%","margin-left":"0px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.quesId,callback:function(t){e.$set(e.ruleForm,"quesId",t)},expression:"ruleForm.quesId"}},e._l(e.options,(function(e){return t("el-option",{key:e.quesId,attrs:{label:e.question,value:e.quesId}})})),1)],1),t("el-form-item",{attrs:{label:"密保答案:","label-width":e.formLabelWidth,prop:"passAnswer"}},[t("el-input",{staticStyle:{width:"65%"},attrs:{autocomplete:"off",placeholder:"请输入答案"},model:{value:e.ruleForm.passAnswer,callback:function(t){e.$set(e.ruleForm,"passAnswer",t)},expression:"ruleForm.passAnswer"}})],1)],1),t("div",{staticClass:"dialog-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.back}},[e._v("取 消")]),t("el-button",{staticStyle:{border:"1"},attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm"),e.SelectUser(e.ruleForm.userName),e.SelectUser1(e.ruleForm.userAccount),e.SelectUser2(e.ruleForm.email)}}},[e._v("注册")])],1)],1)],1)},i=[],a=(r(44114),r(53019),r(69053),r(77819),r(60250),r(2600)),o=r(94502),l={components:{},data(){var e=(e,t,r)=>{const s=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(s.test(t))return r();r(new Error("请输入合法的邮箱"))},t=(e,t,r)=>{const s=/(?=.*\d)(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9]).{8,12}/;if(s.test(t))return r();r(new Error("密码必须是大写字母，小写字母，数字，特殊字符组成，且长度为8到12位！"))};return{rules:{userAccount:[{required:!0,message:"请输入账号",trigger:"blur"},{max:18,message:"账号少于18位",trigger:"blur"},{min:8,message:"账号最少8位",trigger:"blur"}],userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{max:18,message:"用户名格式错误",trigger:"blur"}],userPass:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:t}],passAnswer:[{required:!0,message:"请输入密保答案",trigger:"blur"}],photo:[{required:!0,message:"请选择头像",trigger:"blur"}],quesId:[{required:!0,message:"请选择密保问题",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,min:9,max:18,message:"邮箱格式错误",trigger:"blur"}]},activeName1:"1",activeName:"1",users:[],options:[],value:[],list:[],ruleForm:{file:" ",userName:"",userPass:"",email:"",userAccount:"",quesId:"",passAnswer:""},loading:!1,isShow:!0,dialogVisible7:!1,adVisible7:!1,dialogVisible9:!1,adVisible9:!1,dialogVisible8:!1,adVisible8:!1,smid:"",currentPage:1,pageSizes:[2,5,10,20,30,50],pageSize:10,total:"",total1:"",total2:"",total5:"",selectName:[],selectName7:[],query:"",order:0,oneProjects:[],fileName:"",fileName1:"",file:null,dialogVisible5:!1,adVisible5:!1,total4:"",typeName:{0:"手工纸",1:"机械纸",2:"半手工半机械纸"},typelist1:[{paperType:0,typeName:"手工纸"},{paperType:1,typeName:"机械纸"},{paperType:2,typeName:"半手工半机械纸"}],fileList:[],fileList1:[],dialogVisible:!1,adVisible:!1,dialogVisible1:!1,adVisible1:!1,dialogVisible2:!1,adVisible2:!1,formLabelWidth:"120px",firstTime:"",addPaper:{paperName:"",paperDes:"",paperType:"",paperId:"",site:"",location:"",process:"",picture:"",firstTime:""},pickerOptions:{shortcuts:[{text:"今天",onClick(e){e.$emit("pick",new Date)}},{text:"昨天",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},created(){this.chooseTimeRange(),this.getQuestions(),this.GetUsers()},computed:{},methods:{chooseTimeRange(e){this.firstTime=e,console.log(this.firstTime)},filterTag(e,t,r){const s=r["property"];return t[s]===e},_filterChange(){this.totalSize=this.$refs.table.projectList.length,console.log(this.totalSize)},sendWangEditor(e){this.oneProjects.hyperlinks=e},reload(){this.isShow=!1,this.$nextTick((()=>{this.isShow=!0,this.$refs.table.bodyWrapper.scrollTop=0}))},remoteMethod(e){""!==e?(this.loading=!0,SelectProject(e).then((e=>{this.projectList=e.data})),setTimeout((()=>{this.loading=!1,this.options=this.listSet.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}),1e3)):this.options=[]},back(){this.$router.push("/management/userManagement")},selectList1(){Projects().then((e=>{this.selectName=e.data}))},resetQuery(){this.query="",this.currentPage=1,this.pageSize=10,this.typefilter="",this.coursefilter="",this.getProjects()},indexMethods(e){return(this.currentPage-1)*this.pageSize+e+1},beforeFileUpload(e){const t=e.size/1024/1024<1;return t?(this.file=e,this.fileName=e.name,!1):(this.$message.error("上传的文件大小不能超过 10MB!"),!1)},getQuestions(){(0,o.yS)().then((e=>{console.log(e.data,520),this.options=e.data}))},GetUsers(){(0,a.TB)().then((e=>{console.log(e.data,520),this.users=e.data}))},findpassport(){this.$router.push("/login/passportFind")},enroll(){this.$router.push("/login/enroll")},home(){this.$router.push("/")},handleLogin(){var e=JSON.parse(JSON.stringify(this.loginform));this.$store.dispatch("user/login",e).then((()=>{this.loginVisible=!1,this.username=sessionStorage.getItem("SET_NAME"),this.$router.push({path:this.redirect||"/",query:this.otherQuery})}))},beforeFileUpload(e){const t=e.size/1024/1024<1;if(console.log(t),!t)return this.$message.error("上传的文件大小不能超过 1MB!"),!1;this.file=e,this.fileName=e.name,console.log(fileName)},submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;(0,a.Wv)(this.ruleForm.userName).then((e=>{this.userList=e.data,this.name=e.data.length,console.log(this.name)}));JSON.stringify(this.ruleForm.userAccount);(0,a.Zq)(JSON.stringify(this.ruleForm.userAccount)).then((e=>{this.userList1=e.data,this.name1=e.data.length,console.log(this.name1)})),setTimeout((()=>0!=this.name1?(this.$message({type:"false",message:"账号已存在！"}),console.log("账号已存在！"),!1):0!=this.name?(this.$message({type:"false",message:"用户名已存在！"}),console.log("用户名已存在！"),!1):void this.$confirm("您确定要注册吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=new FormData;e.append("email",this.ruleForm.email),e.append("userName",this.ruleForm.userName),e.append("userAccount",this.ruleForm.userAccount),e.append("userPass",this.ruleForm.userPass),e.append("quesId",this.ruleForm.quesId),e.append("photo",this.ruleForm.photo),e.append("passAnswer",this.ruleForm.passAnswer),e.append("file",this.file),console.log(e.get("email")),(0,a.U0)(e).then((e=>{200==e.code?(this.$message({type:"success",message:"注册成功！"}),this.$router.push("./userManagement")):this.$message({type:"error",message:e.message})}))}))),100)}))},indexMethods4(e){return(this.currentPage4-1)*this.pageSize4+e+1}},filters:{formatData(e){return moment(e).format("YYYY-MM-DD")}}},n=l,u=r(81656),m=(0,u.A)(n,s,i,!1,null,"f8fe7b16",null),c=m.exports},94502:function(e,t,r){r.d(t,{TZ:function(){return o},tq:function(){return a},yS:function(){return i}});var s=r(47120);function i(){return(0,s.A)({url:"/Login/getQuesList",method:"post"})}function a(e){return(0,s.A)({url:"/User/updateOneUser",method:"post",data:e})}function o(e){return(0,s.A)({url:"/User/getMiBao",method:"post",data:e})}},2600:function(e,t,r){r.d(t,{Gr:function(){return l},TB:function(){return i},U0:function(){return p},Wv:function(){return a},Y0:function(){return u},ZN:function(){return n},Zq:function(){return o},_t:function(){return d},gw:function(){return m},nu:function(){return c}});var s=r(47120);function i(){return(0,s.A)({url:"/User/getUsers",method:"post"})}function a(e){return(0,s.A)({url:"/User/SelectUser",method:"post",data:e})}function o(e){return(0,s.A)({url:"/User/SelectUser1",method:"post",data:e})}function l(e){return(0,s.A)({url:"/User/getUserDetail",method:"post",data:e})}function n(e){return(0,s.A)({url:"/User/getUs",method:"post",data:e})}function u(e){return(0,s.A)({url:"/User/changeUserStatus",method:"post",data:e})}function m(e){return(0,s.A)({url:"/PersonalCenter/editUser",method:"post",headers:{"Content-Type":"multipart/form-data"},processData:!1,data:e})}function c(e){return(0,s.A)({url:"/Login/register",method:"post",processData:!1,data:e})}function p(e){return(0,s.A)({url:"/User/addUser1",method:"post",headers:{"Content-Type":"multipart/form-data"},processData:!1,data:e})}function d(e){return(0,s.A)({url:"/User/getUserPageList",method:"post",data:e})}},53019:function(e,t,r){var s=r(85471);s["default"].filter("filterAmount",(function(e,t){return t||(t=20),e&&e.length>t&&(e=e.substring(0,t)+"..."),e}))}}]);