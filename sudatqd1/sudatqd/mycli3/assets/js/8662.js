"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[8662],{76281:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"margin-top":"8px"}},[t("div",[t("el-row",[t("el-col",{attrs:{span:24}},[t("p",{staticClass:"title"},[e._v("纤维原料管理")]),t("el-row",{staticStyle:{"margin-top":"15px"}},[t("el-col",{staticClass:"filter",staticStyle:{"text-align":"left"},attrs:{span:11}},[t("span",[t("el-input",{staticStyle:{"font-family":"STKaiti","font-size":"20px",width:"250px"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词",loading:e.loading,clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t("span",[t("el-button",{staticStyle:{"background-color":"peru","font-family":"STKaiti","font-size":"18px"},attrs:{type:"primary"},on:{click:e.filter}},[e._v("搜索")]),t("el-button",{staticStyle:{"font-family":"STKaiti","font-size":"18px"},attrs:{plain:""},on:{click:e.resetQuery}},[e._v("全部")])],1)]),t("el-col",{staticStyle:{"text-align":"right"},attrs:{span:13}},[t("el-button",{staticStyle:{"background-color":"peru",border:"0","font-family":"STKaiti","font-size":"18px","margin-left":"22px"},attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.addPaper}},[e._v("新增纤维原料 ")])],1)],1),t("el-row",{staticStyle:{"margin-top":"5px"}})],1)],1),e.isShow?t("el-table",{ref:"table",staticClass:"table",staticStyle:{width:"100%",margin:"auto","margin-top":"10px","font-family":"STKaiti","font-size":"18px","text-align":"center","background-color":"antiquewhite"},attrs:{data:e.fiberList,"empty-text":"暂无资源"},on:{"filter-change":e._filterChange}},[t("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"序号",width:"120px",type:"index",index:e.indexMethods}}),t("el-table-column",{attrs:{label:"纤维原料",prop:"fiberType",width:"200px"},scopedSlots:e._u([e._l(e.fiberList,(function(i){return{key:"default",fn:function(i){return[t("div",{staticStyle:{"font-size":"18px"}},[t("el-link",{on:{click:function(t){return e.select(i.row.fiberId)}}},[t("div",{staticStyle:{"font-size":"18px"}},[e._v(e._s(i.row.fiberType))])])],1)]}}}))],null,!0)}),t("el-table-column",{attrs:{label:"纤维老化情况",prop:"characteristic",width:"350px"}}),t("el-table-column",{attrs:{label:"原料状态",prop:"state",width:"230px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.typeName1[t.row.state])+" ")]}}],null,!1,3673020834)}),t("el-table-column",{attrs:{label:"上传人",prop:"creator",width:"230px"}}),t("el-table-column",{attrs:{label:"上传时间",prop:"creationTime",width:"200px",sortable:""},scopedSlots:e._u([e._l(e.fiberList,(function(t){return{key:"default",fn:function(t){return[e._v(" "+e._s(new Date(t.row.creationTime).toLocaleDateString("zh").replaceAll("/","-"))+" ")]}}}))],null,!0)}),t("el-table-column",{attrs:{label:"管理",width:"200px",fixed:"right",prop:"state"},scopedSlots:e._u([{key:"default",fn:function(i){return[1!=i.row.state?t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(t){return e.updateClick(i.row.fiberId)}}},[e._v(" 编辑")]):e._e(),1!=i.row.state?t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(t){return e.deleClick(i.row.fiberId)}}},[e._v("删除")]):e._e(),0!=i.row.state?t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(t){return e.deleClick1(i.row.fiberId)}}},[e._v(" 取消删除")]):e._e()]}}],null,!1,4252580543)})],1):e._e(),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total1>0,expression:"total1 > 0"}],staticStyle:{width:"100%",margin:"auto","font-family":"STKaiti"},attrs:{page:e.currentPage,limit:e.pageSize,"page-sizes":e.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:Number(e.total1)},on:{"update:page":function(t){e.currentPage=t},"update:limit":function(t){e.pageSize=t},pagination:e.PageAllFiber}})],1)])},s=[],l=(i(44114),i(53019),i(69053)),r=i(78010),o=i(77819),n={name:"Managenent",components:{Pagination:l.A},data(){return{activeName1:"1",activeName:"1",coursefilter:"",typefilter:"",typefilter1:"",users:[],options:[],value:[],institutionList:[],list:[],loading:!1,isShow:!0,dialogVisible7:!1,adVisible7:!1,dialogVisible9:!1,adVisible9:!1,dialogVisible8:!1,adVisible8:!1,teachers:[],smid:"",paperList:[],teachers:[],currentPage:1,pageSizes:[2,5,10,20,30,50],pageSize:10,total:"",total1:"",total2:"",total5:"",selectName:[],selectName7:[],query:"",name:"",order:0,oneProjects:[],fileName:"",fileName1:"",file:null,dialogVisible5:!1,adVisible5:!1,total4:"",typeName:{0:"手工纸",1:"机械纸",2:"半手工半机械纸"},typeName1:{0:"正常",1:"已删除"},fiberList:[],fileList:[],fileList1:[],headers:{},dialogVisible:!1,adVisible:!1,dialogVisible1:!1,adVisible1:!1,dialogVisible2:!1,adVisible2:!1,formLabelWidth:"120px",typelist7:[{mienType:2023040502,typeName7:"李四"},{mienType:2023040501,typeName7:"张三"},{mienType:2023040503,typeName7:"王五"},{mienType:2023040504,typeName7:"赵六"}],typelist:[{paperType:"0",typeName:"手工纸"},{paperType:"1",typeName:"机械纸"},{paperType:"2",typeName:"半手工半机械纸"}],typelist1:[{state:0,typeName1:"正常"},{state:1,typeName1:"已删除"}],pickerOptions:{shortcuts:[{text:"今天",onClick(e){e.$emit("pick",new Date)}},{text:"昨天",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},created(){this.PageAllFiber()},computed:{listSet(){return this.paperList.map((e=>({value:`${e.paperId}`,label:`${e.paperName}`})))}},methods:{filterTag(e,t,i){const a=i["property"];return t[a]===e},select(e){console.log(e),this.$router.push({path:"../introduction/selectMa",query:{info:this.$Base64.encode(e)}})},PageAllFiber(){var e=this.currentPage,t=this.pageSize,i=!1,a="",s="",l="fiberType",n="",c="";(0,r.vT)({pageSize:t,isAsc:i,pageNum:e,fiberType:a,characteristic:s,orderColumn:l,creator:n,state:c}).then((i=>{i?(this.total1=i.data.total,this.reload(),console.log(e+"/"+t+"/"+this.total),this.fiberList=i.data.list):console.log(o["default"])}))},remoteMethod1(e){""!==e?(this.loading=!0,SelectInstitution(e).then((e=>{this.institutionList1=e.data})),setTimeout((()=>{this.loading=!1,this.options1=this.listSet1.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}),1e3)):this.options1=[]},_filterChange(){this.totalSize=this.$refs.table.paperList.length,console.log(this.totalSize)},sendWangEditor(e){this.oneProjects.hyperlinks=e},reload(){this.isShow=!1,this.$nextTick((()=>{this.isShow=!0}))},openAdd(){this.adVisible=!0,this.addpaper=[],this.fileName=""},selectList1(){getPaper().then((e=>{this.selectName=e.data}))},resetQuery(){this.name="",this.currentPage=1,this.pageSize=10,this.typefilter="",this.typefilter1="",this.coursefilter="",this.PageAllFiber()},filter(){this.currentPage=1,this.pageSize=10,console.log(this.name),this.PageAllFiber()},indexMethods(e){return(this.currentPage-1)*this.pageSize+e+1},selectList(){AllResourceList().then((e=>{this.selectName=e.data}))},beforeFileUpload(e){const t=e.size/1024/1024<10;return t?(this.file=e,this.fileName=e.name,!1):(this.$message.error("上传的文件大小不能超过 10MB!"),!1)},updateClick(e){console.log(e),this.$router.push({path:"editorIntro",query:{info:this.$Base64.encode(e)}})},addPaper(){this.$router.push("/management/addIntro")},deleClick(e){console.log(e),this.$confirm("您确定要删除该原料吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var t=e,i=1;(0,r.fP)({id:t,status:i}).then((e=>{"纤维状态已更新！"==e.message?(this.$message({type:"success",message:"纤维状态已更新！"}),this.$forceUpdate(),this.PageAllFiber(this.order)):"暂无权限"==e.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:e.message})}))}))},deleClick1(e){console.log(e),this.$confirm("您确定要恢复该原料吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var t=e,i=0;(0,r.fP)({id:t,status:i}).then((e=>{"纤维状态已更新！"==e.message?(this.$message({type:"success",message:"纤维状态已更新！"}),this.$forceUpdate(),this.PageAllFiber(this.order)):"暂无权限"==e.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:e.message})}))}))},indexMethods4(e){return(this.currentPage4-1)*this.pageSize4+e+1}},filters:{formatData(e){return moment(e).format("YYYY-MM-DD")}}},c=n,p=i(81656),u=(0,p.A)(c,a,s,!1,null,"c2595bac",null),d=u.exports},53019:function(e,t,i){var a=i(85471);a["default"].filter("filterAmount",(function(e,t){return t||(t=20),e&&e.length>t&&(e=e.substring(0,t)+"..."),e}))}}]);