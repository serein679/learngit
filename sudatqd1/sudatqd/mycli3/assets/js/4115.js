"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[4115],{94115:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"background"}},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"demo-image"},[t("div",{staticClass:"block"},[t("img",{attrs:{src:r(18476),height:"300px",width:"500px"}})])]),t("div",[t("h2",{staticStyle:{"text-align":"center","font-family":"STKaiti"}},[e._v(e._s(e.title))])]),t("el-form",{attrs:{width:"30%",rules:e.rules}},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[t("el-form-item",{attrs:{label:"头　　像:","label-width":e.formLabelWidth}},[t("el-input",{staticStyle:{width:"65%"},attrs:{readonly:!0,placeholder:"文件名",clearable:""},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),t("span",[t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"doUpload",limit:1,"file-list":e.fileList,"auto-upload":!0,"before-upload":e.beforeFileUpload}},[t("el-button",{staticStyle:{"margin-left":"100%","margin-top":"9px","background-color":"antiquewhite",border:"1",color:"black"},attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v(" 上传文件"),t("i",{staticClass:"el-icon-upload el-icon--right"})]),t("div",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"230px"},attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传1M以内的文件")])],1)],1)],1),t("el-form-item",{attrs:{label:"用户名　:","label-width":e.formLabelWidth,prop:"userName"}},[t("el-input",{staticStyle:{width:"65%"},attrs:{autocomplete:"off",placeholder:"请输入用户名"},model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),t("el-form-item",{attrs:{label:"密　　码:","label-width":e.formLabelWidth,prop:"userPass"}},[t("el-input",{staticStyle:{width:"65%"},attrs:{autocomplete:"off",placeholder:"请输入密码","show-password":""},model:{value:e.ruleForm.userPass,callback:function(t){e.$set(e.ruleForm,"userPass",t)},expression:"ruleForm.userPass"}})],1),t("el-form-item",{attrs:{label:"密保问题:","label-width":e.formLabelWidth,prop:"quesId"}},[t("el-select",{staticStyle:{width:"65%","margin-left":"0px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.quesId,callback:function(t){e.$set(e.ruleForm,"quesId",t)},expression:"ruleForm.quesId"}},e._l(e.options,(function(e){return t("el-option",{key:e.quesId,attrs:{label:e.question,value:e.quesId}})})),1)],1),t("el-form-item",{attrs:{label:"密保答案:","label-width":e.formLabelWidth,prop:"answer"}},[t("el-input",{staticStyle:{width:"65%"},attrs:{autocomplete:"off",placeholder:"请输入答案"},model:{value:e.ruleForm.answer,callback:function(t){e.$set(e.ruleForm,"answer",t)},expression:"ruleForm.answer"}})],1)],1),t("div",{staticStyle:{"margin-top":"8%"}},[t("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")]),t("el-button",{staticStyle:{"background-color":"antiquewhite",border:"1",color:"black"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("注册")])],1)],1)],1)],1)},o=[],a=(r(44114),r(94502)),i=r(2600),n=r(8671);let l;var u={name:"Login",data(){var e=(e,t,r)=>{const s=/(?=.*\d)(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9]).{8,12}/;if(s.test(t))return r();r(new Error("密码必须是大写字母，小写字母，数字，特殊字符组成，且长度为8到12位！"))};return{remember:!1,rememberMe:!1,yzm:"",userName:"",userAccount:" ",fileName:"",file:null,fileList:[],users:[],loginform:{act:"",pwd:""},formLabelWidth:"",ruleForm:{userName:"",userPass:"",quesId:"",answer:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{max:18,message:"用户名格式错误",trigger:"blur"}],userPass:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:e}],answer:[{required:!0,message:"请输入密保答案",trigger:"blur"}],picture:[{required:!0,message:"请选择头像",trigger:"blur"}],quesId:[{required:!0,message:"请选择密保问题",trigger:"blur"}]},userList:[],options:[],userList1:[],userList2:[],passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,title:"注册",redirect:void 0,otherQuery:{},dialogVisible:!1,active:0,findForm:{find_userid:"",pwd_question:"",find_answer:"",newpass:"",checknew_pwd:""}}},watch:{$route:{handler:function(e){const t=e.query;t&&(this.redirect=t.redirect)},immediate:!0}},methods:{verifyLogin(){let e=sessionStorage.getItem("SET_TOKEN");return this.username=sessionStorage.getItem("SET_NAME"),console.log(e),e},getQuestions(){(0,a.yS)().then((e=>{console.log(e.data,520),this.options=e.data}))},GetUsers(){(0,i.TB)().then((e=>{console.log(e.data,520),this.users=e.data}))},findpassport(){this.$router.push("/login/passportFind")},enroll(){this.$router.push("/login/enroll")},home(){this.$router.push("/")},handleLogin(){var e=JSON.parse(JSON.stringify(this.loginform));this.$store.dispatch("user/login",e).then((()=>{this.loginVisible=!1,this.username=sessionStorage.getItem("SET_NAME"),this.$router.push({path:this.redirect||"/",query:this.otherQuery})}))},beforeFileUpload(e){const t=e.size/1024/1024<1;return t?(this.file=e,this.fileName=e.name,console.log(e.name),!1):(this.$message.error("上传的文件大小不能超过 1MB!"),!1)},submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;setTimeout((()=>{this.$confirm("您确定要注册吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=new FormData;e.append("username",this.ruleForm.userName),e.append("userpass",this.ruleForm.userPass),e.append("quesId",this.ruleForm.quesId),e.append("picture",this.file.name),e.append("answer",this.ruleForm.answer),(0,i.nu)(e).then((e=>{200==e.code?(this.$message({type:"success",message:"注册成功！"}),this.$router.push("/login/index")):this.$message({type:"error",message:e.message})}))}))}),20)}))},startLoading(){l=n.Loading.service({lock:!0,text:"加载中……",background:"rgba(0, 0, 0, 0.7)"})},resetForm(e){this.$refs[e].resetFields()}},mounted(){this.getQuestions(),this.GetUsers(),this.startLoading(),l.close()}},d=u,c=r(81656),m=(0,c.A)(d,s,o,!1,null,"6983c51d",null),p=m.exports},94502:function(e,t,r){r.d(t,{TZ:function(){return i},tq:function(){return a},yS:function(){return o}});var s=r(47120);function o(){return(0,s.A)({url:"/Login/getQuesList",method:"post"})}function a(e){return(0,s.A)({url:"/User/updateOneUser",method:"post",data:e})}function i(e){return(0,s.A)({url:"/User/getMiBao",method:"post",data:e})}},2600:function(e,t,r){r.d(t,{Gr:function(){return n},TB:function(){return o},U0:function(){return m},Wv:function(){return a},Y0:function(){return u},ZN:function(){return l},Zq:function(){return i},_t:function(){return p},gw:function(){return d},nu:function(){return c}});var s=r(47120);function o(){return(0,s.A)({url:"/User/getUsers",method:"post"})}function a(e){return(0,s.A)({url:"/User/SelectUser",method:"post",data:e})}function i(e){return(0,s.A)({url:"/User/SelectUser1",method:"post",data:e})}function n(e){return(0,s.A)({url:"/User/getUserDetail",method:"post",data:e})}function l(e){return(0,s.A)({url:"/User/getUs",method:"post",data:e})}function u(e){return(0,s.A)({url:"/User/changeUserStatus",method:"post",data:e})}function d(e){return(0,s.A)({url:"/PersonalCenter/editUser",method:"post",headers:{"Content-Type":"multipart/form-data"},processData:!1,data:e})}function c(e){return(0,s.A)({url:"/Login/register",method:"post",processData:!1,data:e})}function m(e){return(0,s.A)({url:"/User/addUser1",method:"post",headers:{"Content-Type":"multipart/form-data"},processData:!1,data:e})}function p(e){return(0,s.A)({url:"/User/getUserPageList",method:"post",data:e})}},18476:function(e,t,r){e.exports=r.p+"assets/img/6208c26411e471644741220880.png"}}]);