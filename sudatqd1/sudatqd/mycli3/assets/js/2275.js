"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[2275],{42275:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"margin-top":"8px"}},[t("div",[t("el-row",[t("el-col",{attrs:{span:24}},[t("p",{staticClass:"title"},[e._v("纸张管理")]),t("el-row",{staticStyle:{"margin-top":"15px"}},[t("el-col",{staticClass:"filter",staticStyle:{"text-align":"left"},attrs:{span:11}},[t("span",[t("el-input",{staticStyle:{"font-family":"STKaiti","font-size":"20px",width:"250px"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词",loading:e.loading,clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t("span",[t("el-button",{staticStyle:{"background-color":"peru","font-family":"STKaiti","font-size":"18px"},attrs:{type:"primary"},on:{click:e.filter}},[e._v("搜索")]),t("el-button",{staticStyle:{"font-family":"STKaiti","font-size":"18px"},attrs:{plain:""},on:{click:e.resetQuery}},[e._v("全部")])],1)]),t("el-col",{staticStyle:{"text-align":"right"},attrs:{span:13}},[t("el-button",{staticStyle:{"background-color":"peru",border:"0","font-family":"STKaiti","font-size":"18px","text-align":"right"},attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.addPaper}},[e._v("新增纸张 ")])],1)],1),t("el-row",{staticStyle:{"margin-top":"5px"}},[t("el-col",{staticClass:"filter",staticStyle:{"text-align":"left"},attrs:{span:8}},[t("span",{staticStyle:{"font-family":"STKaiti","font-size":"18px"}},[e._v("纸张类型： "),t("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},model:{value:e.typefilter,callback:function(t){e.typefilter=t},expression:"typefilter"}},e._l(e.typelist,(function(e){return t("el-option",{key:e.paperType,staticStyle:{"font-family":"STKaiti","font-size":"16px"},attrs:{label:e.typeName,value:e.paperType}})})),1)],1)]),t("el-col",{staticClass:"filter",attrs:{span:6}},[t("span",{staticStyle:{"font-family":"STKaiti","font-size":"18px"}},[e._v("纸张状态： "),t("el-select",{attrs:{clearable:"",placeholder:"请选择",filterable:""},model:{value:e.typefilter1,callback:function(t){e.typefilter1=t},expression:"typefilter1"}},e._l(e.typelist1,(function(e){return t("el-option",{key:e.state,staticStyle:{"font-family":"STKaiti","font-size":"16px"},attrs:{label:e.typeName1,value:e.state}})})),1)],1)]),t("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2}},[t("el-button",{staticStyle:{"background-color":"peru",border:"0","font-family":"STKaiti","font-size":"18px"},attrs:{type:"primary"},on:{click:e.filter}},[e._v("筛选")])],1)],1)],1)],1),e.isShow?t("el-table",{ref:"table",staticStyle:{width:"100%",margin:"auto","margin-top":"10px","font-family":"STKaiti","font-size":"20px","text-align":"center","background-color":"antiquewhite"},attrs:{data:e.paperList,"empty-text":"暂无资源"},on:{"filter-change":e._filterChange}},[t("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"text-align":"center"},attrs:{label:"序号",width:"120px",type:"index",index:e.indexMethods,"element-loading-text":"拼命加载中"}}),t("el-table-column",{attrs:{label:"纸张名称",prop:"paperName",width:"280px"},scopedSlots:e._u([e._l(e.paperList,(function(a){return{key:"default",fn:function(a){return[t("div",{staticStyle:{"font-size":"18px"}},[t("el-link",{on:{click:function(t){return e.select(a.row.paperId)}}},[t("div",{staticStyle:{"font-size":"18px"}},[e._v(e._s(a.row.paperName))])])],1)]}}}))],null,!0)}),t("el-table-column",{attrs:{label:"纸张种类",prop:"paperType",width:"220px",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.typeName2[t.row.paperType])+" ")]}}],null,!1,2141257944)}),t("el-table-column",{attrs:{label:"纸张状态",prop:"state",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.typeName1[t.row.state])+" ")]}}],null,!1,3673020834)}),t("el-table-column",{attrs:{label:"上传人",prop:"creator",width:"220px"}}),t("el-table-column",{attrs:{label:"上传时间",prop:"creationTime",width:"220px",sortable:""},scopedSlots:e._u([e._l(e.paperList,(function(t){return{key:"default",fn:function(t){return[e._v(" "+e._s(new Date(t.row.creationTime).toLocaleDateString("zh").replaceAll("/","-"))+" ")]}}}))],null,!0)}),t("el-table-column",{attrs:{label:"管理",width:"220px",fixed:"right",prop:"state"},scopedSlots:e._u([{key:"default",fn:function(a){return[1!=a.row.state?t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(t){return e.updateClick(a.row.paperId)}}},[e._v(" 编辑")]):e._e(),1!=a.row.state?t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(t){return e.deleClick(a.row.paperId)}}},[e._v("删除")]):e._e(),0!=a.row.state?t("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(t){return e.deleClick1(a.row.paperId)}}},[e._v(" 取消删除")]):e._e()]}}],null,!1,2111695283)})],1):e._e(),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total1>0,expression:"total1 > 0"}],staticStyle:{width:"100%",margin:"auto","font-family":"STKaiti"},attrs:{page:e.currentPage,limit:e.pageSize,"page-sizes":e.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:Number(e.total1)},on:{"update:page":function(t){e.currentPage=t},"update:limit":function(t){e.pageSize=t},pagination:e.PageAllPaper}})],1)])},s=[],l=(a(44114),a(53019),a(69053)),r=a(60250),o=a(77819),n=a(8671);let p;var c={name:"Managenent",components:{Pagination:l.A},data(){return{loading:!0,activeName1:"1",activeName:"1",coursefilter:"",typefilter:"",typefilter1:"",users:[],options:[],value:[],list:[],loading:!1,isShow:!0,dialogVisible7:!1,adVisible7:!1,dialogVisible9:!1,adVisible9:!1,dialogVisible8:!1,adVisible8:!1,teachers:[],smid:"",paperList:[],teachers:[],currentPage:1,pageSizes:[2,5,10,20,30,50],pageSize:10,total:"",total1:"",total2:"",total5:"",selectName:[],selectName7:[],query:"",name:"",order:0,oneProjects:[],fileName:"",fileName1:"",file:null,dialogVisible5:!1,adVisible5:!1,total4:"",typeName2:{0:"手工纸",1:"机械纸",2:"其他"},typeName1:{0:"正常",1:"已删除"},fileList:[],fileList1:[],headers:{},dialogVisible:!1,adVisible:!1,dialogVisible1:!1,adVisible1:!1,dialogVisible2:!1,adVisible2:!1,formLabelWidth:"120px",typelist:[{paperType:"0",typeName:"手工纸"},{paperType:"1",typeName:"机械纸"},{paperType:"2",typeName:"半手工半机械纸"}],typelist1:[{state:0,typeName1:"正常"},{state:1,typeName1:"已删除"}],pickerOptions:{shortcuts:[{text:"今天",onClick(e){e.$emit("pick",new Date)}},{text:"昨天",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},created(){this.tag=0,this.PageAllPaper(),this.startLoading(),p.close()},computed:{listSet(){return this.paperList.map((e=>({value:`${e.paperId}`,label:`${e.paperName}`})))}},methods:{filterTag(e,t,a){const i=a["property"];return t[i]===e},startLoading(){p=n.Loading.service({lock:!0,text:"加载中……",background:"rgba(0, 0, 0, 0.7)"})},select(e){console.log(e),this.$router.push({path:"../introduction/select",query:{info:this.$Base64.encode(e)}})},remoteMethod1(e){""!==e?(this.loading=!0,(0,r.ZG)(e).then((e=>{this.paperList1=e.data})),setTimeout((()=>{this.loading=!1,this.options1=this.listSet1.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}),1e3)):this.options1=[]},_filterChange(){this.totalSize=this.$refs.table.paperList.length,console.log(this.totalSize)},sendWangEditor(e){this.oneProjects.hyperlinks=e},reload(){this.isShow=!1,this.$nextTick((()=>{this.isShow=!0,this.$refs.table.bodyWrapper.scrollTop=0}))},openAdd(){this.adVisible=!0,this.addpaper=[],this.fileName=""},selectList1(){(0,r.L2)().then((e=>{this.selectName=e.data}))},resetQuery(){this.name="",this.currentPage=1,this.pageSize=10,this.typefilter="",this.typefilter1="",this.coursefilter="",this.PageAllPaper()},filter(){this.currentPage=1,this.pageSize=10;this.name;console.log(this.name),this.PageAllPaper()},PageAllPaper(){var e=this.currentPage,t=this.pageSize,a="paperId",i=!0,s=this.name,l="",n=this.typefilter,p="",c="",u="",d="",f=this.typefilter1;(0,r.NU)({pageSize:t,pageNum:e,orderColumn:a,isAsc:i,paperName:s,paperDes:l,paperType:n,location:p,process:c,technology:u,creator:d,state:f}).then((e=>{e?(this.tag=1,this.paperList=e.data.list,this.total1=e.data.total,this.$forceUpdate(),console.log(this.paperList)):console.log(o["default"])}))},indexMethods(e){return(this.currentPage-1)*this.pageSize+e+1},selectList(){AllResourceList().then((e=>{this.selectName=e.data}))},beforeFileUpload(e){const t=e.size/1024/1024<10;return t?(this.file=e,this.fileName=e.name,!1):(this.$message.error("上传的文件大小不能超过 10MB!"),!1)},updateClick(e){console.log(e),this.$router.push({path:"editorProject",query:{info:this.$Base64.encode(e)}})},addPaper(){this.$router.push("/management/addProject")},deleClick(e){this.$confirm("您确定要删除该纸张吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const t=new FormData;t.append("status",1),console.log(t);var a=e,i=1;(0,r.r7)({id:a,status:i}).then((e=>{"纸张状态已更新！"==e.message?(this.$message({type:"success",message:"纸张状态已更新！"}),this.$forceUpdate(),this.PageAllPaper(this.order)):"操作失败，请重试"==e.message?this.$message({type:"error",message:"操作失败，请重试！"}):this.$message({type:"error",message:e.message})}))}))},deleClick1(e){console.log(e),this.$confirm("您确定要恢复该纸张吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{new FormData;var t=e,a=0;(0,r.r7)({id:t,status:a}).then((e=>{"纸张状态已更新！"==e.message?(this.$message({type:"success",message:"纸张状态已更新！！"}),this.$forceUpdate(),this.PageAllPaper(this.order)):"暂无权限"==e.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:e.message})}))}))},indexMethods4(e){return(this.currentPage4-1)*this.pageSize4+e+1}},filters:{formatData(e){return moment(e).format("YYYY-MM-DD")}}},u=c,d=a(81656),f=(0,d.A)(u,i,s,!1,null,"2c662224",null),h=f.exports},53019:function(e,t,a){var i=a(85471);i["default"].filter("filterAmount",(function(e,t){return t||(t=20),e&&e.length>t&&(e=e.substring(0,t)+"..."),e}))}}]);