"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[2800],{44309:function(t,e,n){n.d(e,{A:function(){return p}});var o=function(){var t=this,e=t._self._c;return null!=t.childComments?e("div",{staticClass:"sub-reply-container",staticStyle:{"margin-left":"0%"}},t._l(t.childComments,(function(n,o){return e("div",{key:o,staticClass:"sub-reply"},[e("div",{staticClass:"listbox-top-user",staticStyle:{"font-family":"STKaiti","font-size":"22px","text-align":"left",color:"rgba(0, 0, 0, 0.671)",margin:"3%","margin-top":"2%","line-height":"110%"}},[t.isReloadData?e("div",[e("p",[e("span",{staticStyle:{"font-family":"STKaiti","font-size":"22px",color:"rgba(0, 0, 0, 0.671)",margin:"3%","margin-top":"2%","line-height":"110%"}},[e("font",{staticStyle:{"font-weight":"bold"}},[t._v(" "+t._s(n.userName))]),t._v(" 回复 "),e("span",[e("font",{staticStyle:{"font-weight":"bold"}},[t._v(" "+t._s(t.parentName))])],1),t._v("："+t._s(n.replyContent))],1)])]):t._e(),e("div",{staticClass:"listbox-bottom"},[e("span",{staticStyle:{"margin-left":"76%","margin-top":"5%","margin-bottom":"1%"}},[t._v("发布时间："+t._s(new Date(n.replyTime).toLocaleString("zh").replaceAll("/","-")))])]),t.obj.userId==n.userId?e("div",[e("el-button",{staticStyle:{"margin-left":"95%",float:"left","margin-top":"1%","margin-bottom":"1%"},attrs:{size:"large"},on:{click:function(e){t.deleReply(n.replyId),t.refresh}}},[e("i",{staticClass:"el-icon-delete"}),t._v(" 删除 ")])],1):t._e(),t.obj.userId!=n.userId?e("div",[e("el-button",{staticStyle:{"margin-left":"95%",float:"left","margin-top":"1%","margin-bottom":"1%"},attrs:{size:"large"},on:{click:function(e){t.loginVisible1=!0,t.getReply(n.replyId)}}},[e("i",{staticClass:"el-icon-warning-outline"}),t._v(" 举报 ")])],1):t._e()]),e("el-dialog",{key:t.i,staticStyle:{"font-family":"STKaiti"},attrs:{title:"回复评论",visible:t.loginVisible},on:{"update:visible":function(e){t.loginVisible=e}}},[e("el-form",[e("el-form-item",{attrs:{label:"评论","label-width":t.formLabelWidth}},[e("el-input",{attrs:{type:"textarea",rows:6},model:{value:t.reply,callback:function(e){t.reply=e},expression:"reply"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.loginVisible=!1,t.reply=null}}},[t._v("取 消")]),e("el-button",{staticStyle:{"background-color":"antiquewhite",border:"1",color:"black"},attrs:{type:"primary"},on:{click:function(e){t.addreply(),t.refreshbtn}}},[t._v("评论")])],1)],1),e("el-dialog",{staticStyle:{"font-family":"STKaiti"},attrs:{title:"举报评论",visible:t.loginVisible1},on:{"update:visible":function(e){t.loginVisible1=e}}},[e("el-form",[e("el-form-item",{attrs:{label:"举报原因","label-width":t.formLabelWidth}},[e("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[e("el-radio",{attrs:{label:0,value:0}},[t._v("违反法律法规")]),e("el-radio",{attrs:{label:1,value:1}},[t._v("谣言类不实消息")]),e("el-radio",{attrs:{label:2,value:2}},[t._v("有害社区环境")]),e("el-radio",{attrs:{label:3,value:3}},[t._v("侵犯个人权益")]),e("el-radio",{attrs:{label:4,value:4}},[t._v("其他")])],1)],1)],1),t._v(" 举报详情："),e("el-input",{attrs:{type:"textarea",rows:6},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.loginVisible1=!1,t.radio=0}}},[t._v("取 消")]),e("el-button",{staticStyle:{"background-color":"antiquewhite",border:"1",color:"black"},attrs:{type:"primary"},on:{click:function(e){return t.addReportt(t.radio)}}},[t._v("举报")])],1)],1),e("ChildComment",{attrs:{childComments:n.children,parentName:n.userName}})],1)})),0):t._e()},r=[],i=n(76388),s=n(96208),a=n(86121),l={inject:["reload"],name:"ChildComment",props:{childComments:{type:Array,default:[]},parentName:{type:String,required:!0}},data(){return{obj:{userId:parseInt(sessionStorage.getItem("SET_USERID"))},loginVisible:!1,loginVisible1:!1,reply:"",commentList:[],entity:[],radio:"",content:"",refresh:!0,isReloadData:!0,childComments:[]}},created(){this.getCommentReplyList()},watch:{props(){this.refresh=!1,this.$nextTick((()=>{this.refresh=!0}))}},methods:{getReply(t){console.log(t),this.entity.replyId=t,console.log(this.entity.replyId)},deleReply(t){console.log(t),this.$confirm("您确定要删除该评论吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,i.MZ)(t).then((t=>{"已成功删除"==t.message?(this.$message({type:"success",message:"已成功删除!"}),this.$forceUpdate(),this.getCommentReplyList()):"暂无权限"==t.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:t.message})}))}))},addReportt(t){if(console.log(this.entity.replyId),this.entity.radio=t,this.entity.replyId=this.entity.replyId,console.log(t),null==this.radio)return this.$message({type:"warning",message:"请选择举报原因"}),!1;this.$confirm("您确定要举报该评论吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var t=this.entity.replyId,e=this.radio,n=this.content,o=0;(0,s.ef)({id:t,type:e,content:n,contentType:o}).then((t=>{"您的投诉已提交至管理员处，请耐心等待审核！"==t.message?(this.$message({type:"success",message:"您的投诉已提交至管理员处，请耐心等待审核！"}),this.loginVisible1=!1):this.$message({type:"error",message:t.message})}))}))},addreply(){this.entity.commentId=this.entity.commentId,""==this.reply?this.$message({type:"error",message:"请输入回复"}):this.$confirm("您确定要添加该回复吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var t=this.entity.commentId,e=0,n=this.reply;(0,i.qy)({id:t,type:e,content:n}).then((t=>{"您的回复已成功发布！"==t.message?(this.$message({type:"success",message:"您的回复已成功发布！"}),this.reply,this.loginVisible=!1,this.getCommentReplyList()):"您的内容中包含敏感词，请注意，我们不接受含有攻击性、侮辱性或不当内容的句子"==t.message?(this.$message({type:"error",message:"您的内容中包含敏感词，请注意，我们不接受含有攻击性、侮辱性或不当内容的句子"}),this.loginVisible=!1):this.$message({type:"error",message:t.message})}))}))},getCommentReplyList(){var t=JSON.parse(this.$Base64.decode(this.$route.query.info));this.paperId=t;var e=this.paperId,n=1;(0,a.Ap)({id:e,status:n}).then((t=>{this.commentsList=t.data,console.log(this.commentsList)}))},reload(){this.isReloadData=!1,this.$nextTick((()=>{this.isReloadData=!0}))}}},u=l,m=n(81656),c=(0,m.A)(u,o,r,!1,null,null,null),p=c.exports},15516:function(t,e,n){n.d(e,{A:function(){return u}});var o=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return n.props.secondComments&&n.props.secondComments.length?e("div",t._l(n.props.secondComments,(function(o,r){return e("div",{key:r,staticClass:"sub-reply-container",attrs:{id:"child-reply"}},[e("div",{staticClass:"listbox-top-user",staticStyle:{"font-family":"STKaiti","font-size":"22px","text-align":"left",color:"rgba(0, 0, 0, 0.671)",margin:"3%","margin-top":"2%","line-height":"110%","margin-left":"6%"}},[e("p",[e("span",{staticStyle:{"font-family":"STKaiti","font-size":"22px","text-align":"left",color:"rgba(0, 0, 0, 0.671)",margin:"3%","margin-top":"2%","line-height":"110%"}},[e("font",{staticStyle:{"font-weight":"bold"}},[t._v(" "+t._s(o.userName)+" ")]),t._v("回复 "),e("span",[e("font",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(n.parentName))])],1),t._v("："+t._s(o.replyContent))],1)]),e("div",{staticClass:"listbox-bottom"},[e("span",{staticStyle:{"margin-left":"76%","margin-top":"5%","margin-bottom":"1%"}},[t._v("回复时间："+t._s(new Date(o.replyTime).toLocaleString("zh").replaceAll("/","-")))])])])])})),0):t._e()},r=[],i={__name:"SecondComment",props:{secondComments:{type:Array,default:[]},parentName:{type:String,reequire:!0}},emits:["handle-reply"],setup(t,{emit:e}){const n=t,o=n.parentName,r=(t,n)=>{e("handle-reply",t,n)};return{__sfc:!0,props:n,parentName:o,emit:e,handleReply:r}}},s=i,a=n(81656),l=(0,a.A)(s,o,r,!1,null,null,null),u=l.exports},86121:function(t,e,n){n.d(e,{Ap:function(){return m},Kn:function(){return c},OB:function(){return i},Rv:function(){return l},SQ:function(){return s},TH:function(){return u},Tg:function(){return a},Vu:function(){return r}});var o=n(47120);function r(t){return(0,o.A)({url:"/Comment/getOneComment1",method:"post",data:t})}function i(t){return(0,o.A)({url:"/PersonalCenter/getUserCommentList",method:"post",data:t})}function s(t){return(0,o.A)({url:"/PersonalCenter/getUserReplyList",method:"post",data:t})}function a(t){return(0,o.A)({url:"/PersonalCenter/getUserComplainList",method:"post",data:t})}function l(t){return(0,o.A)({url:"/PersonalCenter/getUserFeedbackList",method:"post",data:t})}function u(t){return(0,o.A)({url:"/Operation/makeComment",method:"post",data:t})}function m(t){return(0,o.A)({url:"/Operation/getCommentReplyList",method:"post",data:t})}function c(t){return(0,o.A)({url:"/PersonalCenter/deleteUserComment",method:"post",data:t})}},76388:function(t,e,n){n.d(e,{MZ:function(){return i},qy:function(){return s},wQ:function(){return r}});var o=n(47120);function r(){return(0,o.A)({url:"/reply/getReplyS",method:"post"})}function i(t){return(0,o.A)({url:"/PersonalCenter/deleteUserReply",method:"post",data:t})}function s(t){return(0,o.A)({url:"/Operation/makeReply",method:"post",data:t})}},96208:function(t,e,n){n.d(e,{UR:function(){return a},Y2:function(){return m},_Z:function(){return l},ef:function(){return r},mW:function(){return u},nk:function(){return i},uJ:function(){return s},yc:function(){return c}});var o=n(47120);function r(t){return(0,o.A)({url:"/Operation/makeReport",method:"post",data:t})}function i(t){return(0,o.A)({url:"/reportComment/PageAllReCo3",method:"post",data:t})}function s(t){return(0,o.A)({url:"/reportComment/PageAllReCo4",method:"post",data:t})}function a(t){return(0,o.A)({url:"/reportComment/PageAllReCo33",method:"post",data:t})}function l(t){return(0,o.A)({url:"/reportComment/PageAllReCo44",method:"post",data:t})}function u(t){return(0,o.A)({url:"/reportComment/editRe",method:"post",headers:{"Content-Type":"multipart/form-data"},processData:!1,data:t})}function m(t){return(0,o.A)({url:"/reportComment/getOneC",method:"post",data:t})}function c(t){return(0,o.A)({url:"/Operation/getCommentShenList",method:"post",data:t})}}}]);