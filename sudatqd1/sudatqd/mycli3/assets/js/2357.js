"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[2357],{92357:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"8px"}},[e("div",[e("el-row",[e("el-col",{attrs:{span:24}},[e("p",{staticClass:"title"},[t._v("机构管理")]),e("el-row",{staticStyle:{"margin-top":"15px"}},[e("el-col",{staticClass:"filter",staticStyle:{"text-align":"left"},attrs:{span:11}},[e("span",[e("el-input",{staticStyle:{"font-family":"STKaiti","font-size":"20px",width:"250px"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词",loading:t.loading,clearable:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e("span",[e("el-button",{staticStyle:{"background-color":"peru","font-family":"STKaiti","font-size":"18px"},attrs:{type:"primary"},on:{click:t.filter}},[t._v("搜索")]),e("el-button",{staticStyle:{"font-family":"STKaiti","font-size":"18px"},attrs:{plain:""},on:{click:t.resetQuery}},[t._v("全部")])],1)]),e("el-col",{staticStyle:{"text-align":"right"},attrs:{span:13}},[e("el-button",{staticStyle:{"background-color":"peru",border:"0","font-family":"STKaiti","font-size":"18px","margin-left":"22px"},attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.addPaper}},[t._v("新增机构 ")])],1)],1),e("el-row",{staticStyle:{"margin-top":"5px"}})],1)],1),t.isShow?e("el-table",{ref:"table",staticClass:"table",staticStyle:{width:"100%",margin:"auto","margin-top":"10px","font-family":"STKaiti","font-size":"18px","text-align":"center","background-color":"antiquewhite"},attrs:{data:t.institutionList,"empty-text":"暂无资源"},on:{"filter-change":t._filterChange}},[e("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"序号",width:"120px",type:"index",index:t.indexMethods}}),e("el-table-column",{attrs:{label:"机构名称",prop:"paperName",width:"220px"},scopedSlots:t._u([t._l(t.institutionList,(function(i){return{key:"default",fn:function(i){return[e("div",{staticStyle:{"font-size":"18px"}},[e("el-link",{on:{click:function(e){return t.select(i.row.institutionId)}}},[e("div",{staticStyle:{"font-size":"18px"}},[t._v(t._s(i.row.institutionName))])])],1)]}}}))],null,!0)}),e("el-table-column",{attrs:{label:"机构描述",prop:"institutionDescription",width:"500px"},scopedSlots:t._u([t._l(t.institutionList,(function(i){return{key:"default",fn:function(i){return[e("div",{staticStyle:{"font-size":"18px"}},[e("div",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t._f("filterAmount")(i.row.institutionDescription,50)))])])]}}}))],null,!0)}),e("el-table-column",{attrs:{label:"机构时间",prop:"institutionDate",width:"130px",sortable:""},scopedSlots:t._u([t._l(t.institutionList,(function(e){return{key:"default",fn:function(e){return[t._v(" "+t._s(new Date(e.row.institutionDate).toLocaleDateString("zh").replaceAll("/","-"))+" ")]}}}))],null,!0)}),e("el-table-column",{attrs:{label:"机构状态",prop:"state",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.typeName1[e.row.state])+" ")]}}],null,!1,3673020834)}),e("el-table-column",{attrs:{label:"上传人",prop:"creator",width:"130px"}}),e("el-table-column",{attrs:{label:"上传时间",prop:"creationTime",width:"200px",sortable:""},scopedSlots:t._u([t._l(t.institutionList,(function(e){return{key:"default",fn:function(e){return[t._v(" "+t._s(new Date(e.row.creationTime).toLocaleDateString("zh").replaceAll("/","-"))+" ")]}}}))],null,!0)}),e("el-table-column",{attrs:{label:"管理",width:"150px",fixed:"right",prop:"state"},scopedSlots:t._u([{key:"default",fn:function(i){return[1!=i.row.state?e("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(e){return t.updateClick(i.row.institutionId)}}},[t._v(" 编辑")]):t._e(),1!=i.row.state?e("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(e){return t.deleClick(i.row.institutionId)}}},[t._v("删除")]):t._e(),0!=i.row.state?e("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"text",size:"big"},on:{click:function(e){return t.deleClick1(i.row.institutionId)}}},[t._v(" 取消删除")]):t._e()]}}],null,!1,2002878353)})],1):t._e(),e("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total1>0,expression:"total1 > 0"}],staticStyle:{width:"100%",margin:"auto","font-family":"楷体"},attrs:{page:t.currentPage,limit:t.pageSize,"page-sizes":t.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:Number(t.total1)},on:{"update:page":function(e){t.currentPage=e},"update:limit":function(e){t.pageSize=e},pagination:t.PageAllInstitution}})],1)])},a=[],n=(i(44114),i(53019),i(69053)),l=i(60250),o=i(30558),r=i(77819),p={name:"Managenent",components:{Pagination:n.A},data(){return{activeName1:"1",activeName:"1",coursefilter:"",typefilter:"",typefilter1:"",users:[],options:[],value:[],institutionList:[],list:[],loading:!1,isShow:!0,dialogVisible7:!1,adVisible7:!1,dialogVisible9:!1,adVisible9:!1,dialogVisible8:!1,adVisible8:!1,teachers:[],smid:"",paperList:[],teachers:[],currentPage:1,pageSizes:[2,5,10,20,30,50],pageSize:10,total:"",total1:"",total2:"",total5:"",selectName:[],selectName7:[],query:"",name:"",order:0,oneProjects:[],fileName:"",fileName1:"",file:null,dialogVisible5:!1,adVisible5:!1,total4:"",typeName:{0:"手工纸",1:"机械纸",2:"半手工半机械纸"},typeName1:{0:"正常",1:"已删除"},fileList:[],fileList1:[],headers:{},dialogVisible:!1,adVisible:!1,dialogVisible1:!1,adVisible1:!1,dialogVisible2:!1,adVisible2:!1,formLabelWidth:"120px",typelist7:[{mienType:2023040502,typeName7:"李四"},{mienType:2023040501,typeName7:"张三"},{mienType:2023040503,typeName7:"王五"},{mienType:2023040504,typeName7:"赵六"}],typelist:[{paperType:"0",typeName:"手工纸"},{paperType:"1",typeName:"机械纸"},{paperType:"2",typeName:"半手工半机械纸"}],typelist1:[{state:0,typeName1:"正常"},{state:1,typeName1:"已删除"}],pickerOptions:{shortcuts:[{text:"今天",onClick(t){t.$emit("pick",new Date)}},{text:"昨天",onClick(t){const e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick(t){const e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]}}},created(){this.PageAllInstitution()},computed:{listSet(){return this.paperList.map((t=>({value:`${t.paperId}`,label:`${t.paperName}`})))}},methods:{filterTag(t,e,i){const s=i["property"];return e[s]===t},select(t){console.log(t),this.$router.push({path:"../introduction/selectIn",query:{info:this.$Base64.encode(t)}})},PageAllInstitution(){var t=this.currentPage,e=this.pageSize,i=!0,s="",a="",n="",l="",p="",c="institutionId",u="",d="";(0,o.nl)({pageSize:e,pageNum:t,creator:u,state:d,isAsc:i,orderColumn:c,institutionName:s,institutionLocation:a,startDate:n,endDate:l,institutionDescription:p}).then((i=>{i?(this.total1=i.data.total,this.reload(),console.log(t+"/"+e+"/"+this.total),this.institutionList=i.data.list):console.log(r["default"])}))},remoteMethod1(t){""!==t?(this.loading=!0,(0,o.ZM)(t).then((t=>{this.institutionList1=t.data})),setTimeout((()=>{this.loading=!1,this.options1=this.listSet1.filter((e=>e.label.toLowerCase().indexOf(t.toLowerCase())>-1))}),1e3)):this.options1=[]},_filterChange(){this.totalSize=this.$refs.table.paperList.length,console.log(this.totalSize)},sendWangEditor(t){this.oneProjects.hyperlinks=t},reload(){this.isShow=!1,this.$nextTick((()=>{this.isShow=!0}))},openAdd(){this.adVisible=!0,this.addpaper=[],this.fileName=""},selectList1(){(0,l.L2)().then((t=>{this.selectName=t.data}))},resetQuery(){this.name="",this.currentPage=1,this.pageSize=10,this.typefilter="",this.typefilter1="",this.coursefilter="",this.PageAllInstitution()},filter(){this.currentPage=1,this.pageSize=10,console.log(this.name),this.PageAllInstitution()},indexMethods(t){return(this.currentPage-1)*this.pageSize+t+1},selectList(){AllResourceList().then((t=>{this.selectName=t.data}))},beforeFileUpload(t){const e=t.size/1024/1024<1;return e?(this.file=t,this.fileName=t.name,!1):(this.$message.error("上传的文件大小不能超过 1MB!"),!1)},updateClick(t){console.log(t),this.$router.push({path:"editorMien",query:{info:this.$Base64.encode(t)}})},addPaper(){this.$router.push("/management/addMien")},deleClick(t){console.log(t),this.$confirm("您确定要删除该机构吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var e=t,i=1;(0,o.Jg)({id:e,status:i}).then((t=>{"机构状态已更新！"==t.message?(this.$message({type:"success",message:"机构状态已更新！"}),this.$forceUpdate(),this.PageAllInstitution(this.order)):"暂无权限"==t.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:t.message})}))}))},deleClick1(t){console.log(t),this.$confirm("您确定要恢复该机构吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var e=t,i=0;(0,o.Jg)({id:e,status:i}).then((t=>{"机构状态已更新！"==t.message?(this.$message({type:"success",message:"机构状态已更新！"}),this.$forceUpdate(),this.PageAllInstitution(this.order)):"暂无权限"==t.message?this.$message({type:"error",message:"暂无删除权限！"}):this.$message({type:"error",message:t.message})}))}))},indexMethods4(t){return(this.currentPage4-1)*this.pageSize4+t+1}},filters:{formatData(t){return moment(t).format("YYYY-MM-DD")}}},c=p,u=i(81656),d=(0,u.A)(c,s,a,!1,null,"e74ca458",null),h=d.exports},53019:function(t,e,i){var s=i(85471);s["default"].filter("filterAmount",(function(t,e){return e||(e=20),t&&t.length>e&&(t=t.substring(0,e)+"..."),t}))}}]);