"use strict";(self["webpackChunksudatqd"]=self["webpackChunksudatqd"]||[]).push([[9736],{29736:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var r=function(){var e=this,t=e._self._c;return t("div",{attrs:{slot:"title"},slot:"title"},[t("div",{staticStyle:{padding:"10px"}},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/management/projectManagement"}}},[e._v("纸张详情管理")]),t("el-breadcrumb-item",{attrs:{to:{path:"/management/editorProject"}}},[e._v("编辑纸张")])],1)],1),t("span",{staticStyle:{"font-family":"'STKaiti'","font-size":"26px"}},[e._v("编辑纸张")]),t("el-tabs",{staticClass:"el-tab-div",staticStyle:{"font-family":"STKaiti","font-size":"26px"}},[t("el-form",{ref:"onePaper",staticStyle:{"font-size":"32px !important"},attrs:{model:e.onePaper}},[t("el-form-item",{attrs:{label:"纸张名称","label-width":e.formLabelWidth,prop:"paperName"}},[t("el-input",{model:{value:e.onePaper.paperItem.paperName,callback:function(t){e.$set(e.onePaper.paperItem,"paperName",t)},expression:"onePaper.paperItem.paperName"}})],1),t("el-form-item",{attrs:{label:"纸张简介","label-width":e.formLabelWidth,prop:"paperDes"}},[t("el-input",{attrs:{type:"textarea",rows:5,prop:"paperDes"},model:{value:e.onePaper.paperItem.paperDes,callback:function(t){e.$set(e.onePaper.paperItem,"paperDes",t)},expression:"onePaper.paperItem.paperDes"}})],1),t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"纸张首页图片","label-width":e.formLabelWidth}},[t("el-input",{ref:"fileInput",attrs:{readonly:!0,type:"file",accept:"image/*",clearable:""},on:{change:e.handleFileChange},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),t("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{float:"right"},attrs:{action:"doUpload",limit:3,"file-list":e.fileList,"before-upload":e.beforeFileUpload,"on-change":e.changeCarPicture}},[t("el-button",{attrs:{slot:"trigger",type:"primary"},on:{change:e.handleFileChange},slot:"trigger"},[e._v("上传文件"),t("i",{staticClass:"el-icon-upload el-icon--right"})]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传1M以内的文件")])],1),t("img",{staticStyle:{float:"left","margin-top":"10px"},attrs:{src:e.onePaper.paperItem.pictureLocation,height:"150px"}}),e.onePaper.paperItem.pictureLocation?t("p",[e._v("Base64 编码:")]):e._e(),e.onePaper.paperItem.pictureLocation[1]?t("textarea",{attrs:{rows:"5",cols:"50",readonly:""},domProps:{value:e.onePaper.paperItem.pictureLocation[1]}}):e._e()],1),t("el-form-item",{attrs:{label:"制作流程","label-width":e.formLabelWidth,prop:"process"}},[t("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.onePaper.paperItem.process,callback:function(t){e.$set(e.onePaper.paperItem,"process",t)},expression:"onePaper.paperItem.process"}})],1),t("el-form-item",{attrs:{label:"纸张加工工艺","label-width":e.formLabelWidth,prop:"process"}},[t("el-input",{attrs:{type:"textarea",rows:6},model:{value:e.onePaper.paperItem.technology,callback:function(t){e.$set(e.onePaper.paperItem,"technology",t)},expression:"onePaper.paperItem.technology"}})],1),t("el-form-item",{attrs:{label:"纸张类型","label-width":e.formLabelWidth,prop:"paperType"}},[t("el-select",{staticStyle:{width:"100%","font-family":"'STKaiti'"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.onePaper.paperItem.paperType,callback:function(t){e.$set(e.onePaper.paperItem,"paperType",t)},expression:"onePaper.paperItem.paperType"}},e._l(e.typelist1,(function(e){return t("el-option",{key:e.paperType,staticStyle:{"font-family":"'STKaiti'"},attrs:{label:e.typeName,value:e.paperType}})})),1)],1),t("el-form-item",{attrs:{label:"产地","label-width":e.formLabelWidth,prop:"location"}},[t("el-input",{model:{value:e.onePaper.paperItem.location,callback:function(t){e.$set(e.onePaper.paperItem,"location",t)},expression:"onePaper.paperItem.location"}})],1)],1),t("div",{staticClass:"dialog-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeProject()}}},[e._v("修 改")]),t("el-button",{attrs:{type:"primary"},on:{click:e.back}},[e._v("取 消")])],1)],1)],1)},o=[],i=(a(44114),a(53019),a(56950)),s=a(60250),l=a(78010),p=a(76678),n={components:{},data(){return{options1:i.NO,selectedOptions:[],activeName1:"1",activeName:"1",users:[],fiberList:[],fibers:[],base64Image:null,archives:[],paperId:"",options:[],value:[],list:[],loading:!1,isShow:!0,dialogVisible7:!1,adVisible7:!1,dialogVisible9:!1,adVisible9:!1,dialogVisible8:!1,adVisible8:!1,teachers:[],smid:"",paperList:[],fiberlist1:[],archivelist1:[],onePaper:[],teachers:[],currentPage:1,pageSizes:[2,5,10,20,30,50],pageSize:10,total:"",total1:"",total2:"",total5:"",selectName:[],selectName7:[],query:"",order:0,oneProjects:[],editor:"",fileName:"",fileName1:"",file:null,dialogVisible5:!1,adVisible5:!1,total4:"",codeArray:[],typeName:{0:"手工纸",1:"机械纸",2:"其他"},fileList:[],headers:{},dialogVisible:!1,adVisible:!1,dialogVisible1:!1,adVisible1:!1,dialogVisible2:!1,adVisible2:!1,formLabelWidth:"120px",typelist1:[{paperType:0,typeName:"手工纸"},{paperType:1,typeName:"机械纸"},{paperType:2,typeName:"其他"}],pickerOptions:{shortcuts:[{text:"今天",onClick(e){e.$emit("pick",new Date)}},{text:"昨天",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},created(){this.gettingData(),this.getArchives(),this.getOnePaper(this.paperId)},watch:{$route:"gettingData"},methods:{getTeacherIntro(){TeacherIntro().then((e=>{this.teachers=e.data}))},handleChange(e){console.log(e),console.log(e[0]),console.log(e[1]),console.log(e[2]),this.getCodeToText(null,e)},getCodeToText(e,t){if(console.log(t),null===e&&null===t)return null;null===t&&(t=e.split(","));let a="";switch(t.length){case 1:a+=i.CodeToText[t[0]];break;case 2:a+=i.CodeToText[t[0]]+"/"+i.CodeToText[t[1]];break;case 3:a+=i.CodeToText[t[0]]+"/"+i.CodeToText[t[1]]+"/"+i.CodeToText[t[2]];break;default:break}return console.log(a),this.onePaper.site=a,console.log(this.onePaper.site),a},filterTag(e,t,a){const r=a["property"];return t[r]===e},gettingData(){var e=JSON.parse(this.$Base64.decode(this.$route.query.info));this.paperId=e},getFibers(){(0,l.lf)().then((e=>{this.fibers=e.data,console.log(this.fibers)}))},getArchives(){(0,p.WM)().then((e=>{this.archives=e.data,console.log(this.archives)}))},_filterChange(){this.totalSize=this.$refs.table.projectList.length,console.log(this.totalSize)},sendWangEditor(e){this.oneProjects.hyperlinks=e},indexMethods(e){return(this.currentPage-1)*this.pageSize+e+1},handlePreview(e){console.log(e)},handleRemove(e,t){console.log(e,t)},submitUpload(){console.log(fileList),this.$refs.upload.submit()},beforeFileUpload(e){const t=e.size/1024/1024<1;return t?(this.file=e,this.fileName=e.name,!1):(this.$message.error("上传的文件大小不能超过 1MB!"),!1)},changeCarPicture(e,t){let a=new FileReader;a.onload=()=>{let e=a.result,t=e.split(",");this.carPicture=t[1]},a.readAsDataURL(e.raw),console.log(this.carPicture)},getOnePaper(e){(0,s.Ju)(e).then((e=>{this.onePaper=e.data,this.fiberList1=this.onePaper.fiberlist1,this.paperList1=this.onePaper.archivePaperList,console.log(this.paperList1)}))},changeProject(){if(console.log(this.onePaper),""==this.onePaper.paperName)return this.$message({type:"warning",message:"纸张名称为空，请填写！"}),!1;this.$refs.onePaper.validate((e=>{if(!e)return console.log("error submit!!"),!1;this.$confirm("您确定要修改该纸张吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var e=this.onePaper.paperItem.paperId,t=this.onePaper.paperItem.paperName,a=this.onePaper.paperItem.paperDes,r=this.onePaper.paperItem.paperType,o=this.onePaper.paperItem.location,i=this.carPicture,l=this.onePaper.paperItem.process,p=this.onePaper.paperItem.technology;(0,s.xe)({process:l,paperId:e,paperName:t,paperDes:a,paperType:r,location:o,technology:p,pictureLocation:i}).then((e=>{console.log(i),"纸张信息已更新！"==e.message?(this.$router.push("/management/projectManagement"),this.$message({type:"success",message:"纸张信息已更新！"}),this.dialogVisible=!1):this.$message({type:"error",message:e.message})}))}))}))},back(){this.$router.push("/management/projectManagement")},indexMethods4(e){return(this.currentPage4-1)*this.pageSize4+e+1},handleFileChange(e){const t=e.target.files[0],a=e.target.files[0].name;console.log(a),console.log(e.target.files),t&&this.convertToBase64(t)},convertToBase64(e){const t=new FileReader;t.onload=e=>{var t=[];t=e.target.result,this.onePaper.paperItem.pictureLocation=t.split(","),console.log(this.onePaper.paperItem.pictureLocation[1])};const a=e.name+":"+this.onePaper.paperItem.pictureLocation[1];console.log(a),t.readAsDataURL(e)}},filters:{formatData(e){return moment(e).format("YYYY-MM-DD")}}},c=n,m=a(81656),h=(0,m.A)(c,r,o,!1,null,"9eff1e50",null),d=h.exports},53019:function(e,t,a){var r=a(85471);r["default"].filter("filterAmount",(function(e,t){return t||(t=20),e&&e.length>t&&(e=e.substring(0,t)+"..."),e}))}}]);